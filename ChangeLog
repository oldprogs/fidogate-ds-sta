2006-11-15  Andrey Slsuar  <anrays@gmail.com>

	* src/areafix/areafix.c (cmd_sub): Fix potential
	crashes.
	* src/tick/ftntick.c (process_tick): Fix crashes
	(bug, reported by Eugene V. Subbotin)

2006-10-31  Andrey Slusar  <anrays@gmail.com>

	* src/common/msgid.c:
	* src/include/packet.h:
	* src/toss/ftntoss.c:
	name_from, name_to, subject is char types.

2006-10-20  Andrey Slusar  <anrays@gmail.com>

	* src/toss/ftntoss.c: Fix checking NULL entries in areas
	(patch from Yauheni Kaliuta).
	* src/common/areas.c: Correct types for x_a and x_g
	(patch from Yauheny Kaliuta).

2006-10-14  Andrey Slusar  <anrays@gmail.com>

	======= Release 5.1.5ds ========================
	------- CVS tag R515 ---------------------------
	* configure.in: Bump to 5.1.5ds.
	* version.h (PATCHLEVEL): Ditto.

2006-10-13  Andrey Slusar  <anrays@gmail.com>

	* src/common/lock.c: Fix stale locks detecting(patch
	from Zhenya Kaluta, tested by Evgeniy Kozhuhovskiy).
	* src/common/log.c: Comment breaking code(modified
	patch from Zhenya Kaluta, tested by Evgeniy Kozhuhovskiy).
	* src/toss/runinc.c (toss_init): Fix return values.
	* src/include/packet.h (struct): Fix types for name_to,
	name_from, subject.
	* src/common/areas.c (areas_init_xlate): Fix types
	for x_a and x_g.

2006-05-09  Andrey Slusar  <anrays@gmail.com>

	* configure.in: Update my email address, correct
	fidogate version number in AM_INIT_AUTOMAKE.
	* Makefile.am (installdirs): Add needed spaces
	(thanks to Evgeniy Kozhuhovskiy).

2006-03-22  Andrey Slusar  <anrays@gmail.com>

	======= Release 5.1.4ds ========================
	------- CVS tag R514 ---------------------------
	* configure.in: Bump to 5.1.4ds.
	* version.h (PATCHLEVEL): Ditto.

2006-02-26  Andrey Slusar  <anray@users.sourceforge.net>

	* src/areafix/areafix.c (cmd_sub): Fix build warning.

2005-11-23  Andrey Slusar  <anray@users.sourceforge.net>

	* src/tick/ftntick.c (process_tic): Fix detecting
	options from uplinks(thanks to Alexey Illarionov).
	* src/toss/ftntoss.c: Added int_uplinks flag.
	(do_echomail): Fix detecting options from uplinks,
	added initing uplinks file(bug, reported by Pasha.K).

2005-04-23  Andrey Slusar  <anray@users.sourceforge.net>

	======= Release 5.1.3ds ========================
	------- CVS tag R513 ---------------------------
	* version.h (EXTRAVERSION): Bump to 5.1.3ds.
	* configure.in: Ditto.
	* packages/freebsd: Ditto.
	* doc/FAQ.ru: Now this is a confiuration mini FAQ
	(part 10 of FAQ_Config.ru).
	* doc/FAQ_Config.ru: Added full fidogate russian
	configuration FAQ.
	* doc/README.ru: Update.

2005-04-19  Andrey Slusar  <anray@users.sourceforge.net>

	* Changes.ru: Update.
	* doc/README.ru: Ditto.
	* doc/examples/dyff/fidogate.conf.sample.in:
	Ditto.
	* src/areafix/areafix.c (areafix_auth_check):
	Removed option AllowEmptyPwd. It's broke the
	areafix keys checking.
	* src/toss/ftnpack.c (do_pack): Fixed checking
	busy node(modified patch from Zhenya Kaluta).
	* src/common/lock.c (lock_lockfile_id): Fixed
	checking locks, not containing pid(patch from
	Zhenya Kaluta).

2004-12-10  Andrey Slusar  <anray@users.sourceforge.net>

	======= Release 5.1.2ds ========================
	------- CVS tag R512 ---------------------------	
	* version.h (EXTRAVERSION): bump to 5.1.2ds.
	* configure.in: ditto.

2004-12-01  Andrey Slusar  <anray@users.sourceforge.net>

	* version.h (EXTRAVERSION): bump to 5.1.2ds-rc4.
	* configure.in: ditto.
	* Changes.ru: update.
	* src/common/packet.c (pkt_get_msg_hdr): remove
	very strong headers checking.

2004-11-26  Andrey Slusar  <anray@users.sourceforge.net>

	* Changes.ru: update.

2004-11-20  Andrey Slusar  <anray@users.sourceforge.net>

	* doc/README.ru: update.

2004-11-18  Andrey Slusar  <anray@users.sourceforge.net>

	* version.h: bump to 5.1.2ds-rc3
	* configure.in: ditto
	* src/common/rematch.c: rename HAVE_REGEX_H to
	HAS_POSIX_REGEX
	* acconfig.h: ditto
	* src/include/prototypes.h: ditto
	* src/gate/rfc2ftn.c: rename HAVE_REGEX_H to
	HAS_POSIX_REGEX, fix HAS_POSIX_REGEX

2004-11-02  Andrey Slusar  <anray@users.sourceforge.net>

	* version.h: bump to 5.1.2ds-rc2
	* configure.in: ditto
	* src/gate/rfc2ftn.c: add X-FTN-Tearline mime_deheader,
	Origin mime_deheader when UseOrganizationForOrigin
	enabled

2004-10-29  Andrey Slusar  <anray@users.sourceforge.net>

	* version.h: bump to 5.1.2ds-rc1
	* configure.in: ditto
	* build/config.make.in: added NETMAILDIR, UUINBOUND,
	FTPINBOUND
	* src/common/message.c: added option INSERT_ORIGIN
	(see Changes for details)
	* src/common/msgid.c: added checking references
	line to s_msgid_fido_to_rfc(), added advanced
	support X-Flags 'm'
	* src/gate/rfc2ftn.c: remove define REPLY_IF_X_FLAGS_M,
	added advanced supporting X-Flags 'm'
	* src/common/packet.c: pretty checking message date
	header
	* src/charset/Makefile.am: add charsetc to installed
	libexec programs
	* src/gate/ftn2rfc.c: add option GateRfcKludge, fix
	cs_out definition
	* src/tick/ftntick.c: fixed TickFileAction message
	* src/toss/ftnpack.c: fixed define DO_NOT_TOSS_NETMAIL
	* src/toss/ftntoss.c: ditto
	* src/include/prototypes.h: add new parameters to
	s_msgid_fido_to_rfc() and s_msgid_rfc_to_fido()
	* scripts/www/gate.cgi.in: fixed working
	* doc/FIDOGATE+tracker.ru: added russian tracker+fidogate
	FAQ(thanks to Andrew Zhuravlev)

2004-09-10  Andrey Slusar  <anray@users.sourceforge.net>

	* src/areafix/areafix.c: added option
	AllowEmptyPwd(see Changes)

2004-08-26  Andrey Slusar  <anray@users.sourceforge.net>

	* src/gate/ftninpost.c: if SingleArticles defined,
	not using FTNInRecombine
	* src/gate/ftn2rfc.c: fix SingleArticles
	* doc/FAQ.ru: add s-news configure

2004-08-21  Andrey Slusar  <anray@users.sourceforge.net>

	* src/common/log.c: removed getenv()s, create
	security risk for setuid news programs

2004-08-07  Andrey Slusar  <anray@users.sourceforge.net>

	* configure.in: fix default prefix
	* src/gate/Makefile.am: fix build with not default
	    owner and group(thanks to Max Boyarov)

2004-08-01  Andrey Slusar  <anray@users.sourceforge.net>

	* configure.in: total rewrite and fix more bugs
	* src/toss/ftnexpire.c: fix format warnings
	* src/toss/ftntoss.c: fix format warnings
	* src/tick/ftnhatch.c: fix format warnings
	* src/tick/ftntick.c: fix format warnings
	* src/common/histdb.c: fix format warnings
	* src/common/log.c: fix incompatible type warning
	* src/common/tick.c: fix format warnings

2004-07-23  Andrey Slusar  <anray@users.sourceforge.net>

	* src/gate/rfc2ftn.c: fix FTS_VIA(thanks to
	Alex Soukhotine)

2004-07-22  Andrey Slusar  <anray@users.sourceforge.net>

	* src/gate/ftninpost.c: change system() to
	portable run_system()

2004-07-20  Andrey Slusar  <anray@users.sourceforge.net>

	* configure.in: change innconfval -s parsing

2004-07-12  Andrey Slusar  <anray@users.sourceforge.net>

	* src/toss/ngoper.c: if AutoCreateRenumberCmd not
	defined, this is silently skipped
	* src/gate/send-fidogate.in: fixed confval warning

2004-07-09  Andrey Slusar  <anray@users.sourceforge.net>

	======= Release 5.1.1ds =============================
	------- CVS tag R511 --------------------------------
	* version.h: update to stable 5.1.1ds
	* configure.h.in: update to stable 5.1.1ds

2004-07-05  Andrey Slusar  <anray@users.sourceforge.net>

	* doc/README.ru: update
	* doc/FAQ.ru: update
	* src/common/binkley.c: if enable AMIGADOS_4D_OUTBOUND,
	    then using outbound for default zone
	* src/toss/ftnpack.c: if enable AMIGADOS_4D_OUTBOUND,
	    then using outbound for default zone
	* src/toss/ftnroute.c: if enable AMIGADOS_4D_OUTBOUND,
	    then using outbound for default zone
	* src/gate/ftn2rfc.c: fix SingleArticles

2004-06-15  Andrey Slusar  <rusfidogate@users.sourceforge.net>

	* version.h: update to 5.1.1ds-rc5
	* packages/freebsd: update
	* src/toss/runinc.c: add -c option, if tmpunpack
	    dirs not exsist, create it
	* src/areafix/areafix.c: fix traping cmd_listall

2004-06-11  Andrey Slusar  <rusfidogate@users.sourceforge.net>

	* src/common/packet.c: change checking pkt date
	    format

2004-06-08  Andrey Slusar  <rusfidogate@users.sourceforge.net>

	* version.h: update to 5.1.1ds-rc4
	* scripts/nodelist/nl-autoupd.in: add detecting
	    DIFFDIR, NLDIR, NLFDIR in fidogate.conf

2004-06-06  Andrey Slusar  <rusfidogate@users.sourceforge.net>

	* version.h: update version number to 5.1.1ds-rc3
	* src/gate/send-fidogate.in: add detecting LOGDIR
	    and LOCKDIR in fidogate.conf
	* src/util/confval.c: change sterr to stdout if
	    variable exist
	* src/common/getopt.c: fix args
	* src/common/misc.c: fix and rewrite str_append()

2004-05-26  Andrey Slusar  <rusfidogate@users.sourceforge.net>

	* Changes.ru: update
	* doc/FAQ.ru: add Id

2004-05-24  Andrey Slusar  <rusfidogate@users.sourceforge.net>

	* version.h: update version number to 5.1.1ds-rc1
	* src/areafix/areafix.c: add key for NEW command

2004-04-18  Andrey Slusar  <rusfidogate@users.sourceforge.net>

	* packages/freebsd: update

2004-04-15  Andrey Slusar  <rusfidogate@users.sourceforge.net>

	* scripts/nodelist/nl-autoupd.in: remove $IFINDEX

2004-03-30  Andrey Slusar  <rusfidogate@users.sourceforge.net>

	* src/common/rfcheader.c: fix RECODE_ALL_RFC
	* src/common/getopt.c: fix warning
	* src/gate/ftninpost.c: fix warning
	* src/tick/ftntick.c: fix warning

2004-03-29  Andrey Slusar  <rusfidogate@users.sourceforge.net>

	* src/arafix/areafix.c: fix crashing ftnafutil if
	    rulesfile is broken

2004-03-24  Andrey Slusar  <rusfidogate@users.sourceforge.net>

	* src/areafix/areafix.c: remove unnecessary '\n' if
	    enable AFSEND_ECHO_STATUS

2004-03-16  Andrey Slusar  <rusfidogate@users.sourceforge.net>

	* packages/freebsd: update

2004-03-12  Andrey Slusar  <rusfidogate@users.sourceforge.net>

	* src/areafix/areafix.c: fix cmd_listall finding
	    dupe lines in lists (thanks to Anton Leer)
	* TODO.rus: update

2004-03-04  Andrey Slusar  <rusfidogate@users.sourceforge.net>

	* src/common/msgid.c: fix trap ftn2rfc if bad
	    REPLY and use dbc_history

2004-02-26  Andrey Slusar <rusfidogate@users.sourceforge.net>

	* src/common/histdb.c: fix writing fido_msgid
	* src/gate/ftn2rfc.c: remove '(', ')' in header
	    X-Comment-To(see Changes)
	* src/common/packet.c: add FIX_BAD_PKT_YEAR

2004-02-25  Andrey Slusar <rusfidogate@users.sourceforge.net>

	* src/common/packet.c: fix the processing of the bad
	    packets
	* src/areafix/ftnafutil.c: fix the problem with removing
	    of nodes during unsubscribe

2004-02-22  Andrey Slusar <rusfidogate@users.sourceforge.net>

	* src/common/msgid.c: not write mail to msgid
	    history
	* src/all: rename OLD_TMP to OLD_TOSS, fix warnings

2004-02-19  Andrey Slusar <rusfidogate@users.sourceforge.net>

	* all: fix Makefiles

2004-02-17  Andrey Slusar <rusfidogate@users.sourceforge.net>

	* src/gate/ftn2rfc.c: fix area-flag
	* src/common/msgid.c: fix DBC_HISTORY

2004-02-12  Andrey Slusar <rusfidogate@users.sourceforge.net>

	* src/common/node.c: fix the problem with dupes of
	    the addresses in (F)Areas.bbs

2004-02-11  Andrey Slusar <rusfidogate@users.sourceforge.net>

	* src/tick/ftntick.c: fix the AutoCreateFileechoLine
	    problem
	* src/areafix/areafix.c: fix the problem of similar
	    path to autocreate fechos in FAreas.bbs

2004-02-09  Andrey Slusar <rusfidogate@users.sourceforge.net>

	* packages/freebsd: update
	* doc/README.ru: update

2004-02-05  Andrey Slusar <rusfidogate@users.sourceforge.net>

	* src/areafix/areafix.c: fix support gcc<3.0
	* src/gate/rfc2ftn.c: fix disable FIDO_STYLE_MSGID
	    (thanks to Andrew Porohin)

2004-02-02  Andrey Slusar <rusfidogate@users.sourceforge.net>

	* acconfig.h: change rfc_lvl_1
	* src/toss/runinc.c: add ftpin, uuin support
	    (thanks to Andrew Zhuravlev)

2004-01-31  Andrey Slusar <rusfidogate@users.sourceforge.net>

	* packages/freebsd: update freebsd port
	* src/common/msgid.c: change log() to fglog()

2004-01-30  Andrey Slusar <rusfidogate@users.sourceforge.net>

	* doc/old/FIDOGATE_ftrack: add ftrack FAQ(thanks
	    to Andrew Zhuravlev)
	* configure.in: add --with-lockdir(thanks to
	    Andrew Zhuravlev)

2004-01-29  Andrey Slusar <rusfidogate@users.sourceforge.net>

	* src/common/rfcheader.c: fix rfc_lvl_3

2004-01-28  Andrey Slusar <rusfidogate@users.sourceforge.net>

	* doc/old/FAQ_Fidogate: add old fidogate FAQ

2004-01-27  Andrey Slusar <rusfidogate@users.sourceforge.net>

	* src/tick/ftntick.c: fix logging TickFileAction
	* src: change log() to fglog()
	* src/gate/rfc2ftn.c: fix generate MSGID
	* config.h.in: change FTN_RFC_HEADERS,
	    RFC_LVL_1_HEADERS, RFC_LVL_3_HEADERS

2004-01-25  Andrey Slusar <rusfidogate@users.sourceforge.net>

	* src/areafix/areafix.c: change disable AF_AVAIL

2004-01-20  Andrey Slusar <rusfidogate@users.sourceforge.net>

	* src/gate/rfc2ftn.c: fix disable FIDO_STYLE_MSGID
	* src/include/prototypes.h: fix disable FIDO_STYLE_MSGID
	* src/common/msgid.c: fix disable FIDO_STYLE_MSGID

2004-01-19  Andrey Slusar <rusfidogate@users.sourceforge.net>

	* src/gate/rfc2ftn.c: fix disable FIDO_STYLE_MSGID
	* src/areafix/areafix.c: fix AF_AVAIL, fix disable
	    AF_AVAIL

2004-01-12  Andrey Slusar <rusfidogate@users.sourceforge.net>

	* doc/examples: fixes

2004-01-09  Andrey Slusar <rusfidogate@users.sourceforge.net>

	* doc/FAQ.ru: update

2003-12-28  Andrey Slusar <rusfidogate@users.sourceforge.net>

	* configure.in: fix warning message

2003-12-07  Andrey Slusar <rusfidogate@users.sourceforge.net>

	* src/charset/cyrillic.map: update

2003-12-03  Andrey Slusar <rusfidogate@users.sourceforge.net>

	* src/charset/cyrillic.map: add belarussian(thanks to
	    Serge Serebro)

2003-12-01  Andrey Slusar <rusfidogate@users.sourceforge.net>

	* src/gate/ftn2rfc.c: fix UseOriginForOrganization
	    (thanks to Anton Leer)
	* package/freebsd: update
	* config.h.in: remove vsprintf(), change to vsnprintf()
	* acconfig.h: remove vsprintf(), change to vsnprintf()
	* src/areafix/areafix.c: remove support vsprintf()
	* src/common/misc.c: remove support vsprintf()
	* src/common/textlist.c: remove support vsprintf()
	* src/common/tmps.c: remove support vsprintf()

2003-11-25  Andrey Slusar <rusfidogate@users.sourceforge.net>

        * src/charset/cyrillic.map: fix cp1125 map(thanks to
            alex help kushnaryov)
        * packages/rpm/fidogate.spec: update
        * src/charset/cyrillic.map: add alias cp1251
        * doc/mailer/sendmail/mailer/ftn.m4.in: restore
        * src/toss/ftntoss.c: edit spyes subject

2003-11-09  Andrey Slusar <rusfidogate@users.sourceforge.net>

	======= Release 5.1.0ds =============================
	------- CVS tag R510 --------------------------------
	------- CVS ci --------------------------------------
	
	* version.h: update version number

2003-11-04  Andrey Slusar <rusfidogate@users.sourceforge.net>

	* source: copy to stable
	* test: remove
	* doc/news/leafnode: remove, move to current
	* doc/mailer/exim: remove, move to current

2003-11-01  Andrey Slusar <rusfidogate@users.sourceforge.net>

	* src/gate/ftn2rfc.c: fix NOINSERT_ORGANIZATION(thanks
	    to Anton Leer)
	* doc/FAQ.ru: update
	* packages/freebsd: update freebsd port
	* src/tick/ftntick.c: fix TickFileAction

2003-10-30  Andrey Slusar <rusfidogate@users.sourceforge.net> 

	* cvsexp: update
	* src/common/address.c: fix AI_1
	* doc/README.ru: update

2003-10-28  Andrey Slusar <rusfidogate@users.sourceforge.net>

	* src/gate/ftn2rfc.c: fix UseOriginForOrganization(thanks
	    to Alex Kotikov)

2003-10-27  Andrey Slusar <rusfidogate@users.sourceforge.net>

	* configure: fix compile ftnnews(thanks to Zhenja Kaluta)
	* config.h.in: remove DEFAULT_OUTNETMAIL
	* src/toss/ftntoss.c: fix DO_NOT_TOSS_NETMAIL

2003-10-26  Andrey Slusar <rusfidogate@users.sourceforge.net>

	* src/tick/ftntick.c: remove unused *s2

2003-10-22  Andrey Slusar <rusfidogate@users.sourceforge.net>

	* configure: fix sendmail, rnews, inews path
	* src/charset/cyrillic.map: add cp1125 to default map

2003-10-20  Andrey Slusar <rusfidogate@users.sourceforge.net>

	* doc/FAQ.ru: update
	* doc/README.ru: update

2003-10-18  Andrey Slusar <rusfidogate@users.sourceforge.net>

	* doc/news/leafnode: update, fix errors(thanks to Elohin Igor)

2003-10-15  Andrey Slusar <rusfidogate@users.sourceforge.net>

	* doc/mailer/sendmail/mailer/ftn.m4.in: delete section ftnmail
	* configure: add sysconfdir and bugfixes
	* packages/rpm/fidogate.spec: update
	* doc/news/leafnode/common.h.in: delete common.h and change paths
	* doc/mailer/exim: add exim configs
	* doc/FAQ.ru: update
	* autogen.sh: add
	* doc/examples/point: update to current version

2003-10-02  Andrey Slusar <rusfidogate@users.sourceforge.net>

	* src/tick/ftntick.c: fix tic.replaces(thanks to Andrey Zhuravlev)
	* packages/freebsd/Makefile: update freebsd port

2003-10-01  Andrey Slusar <rusfidogate@users.sourceforge.net>

	* Changes.ru: add russian changes
	* src/areafix/ftnafutil.c: add delete unsubscribe areas

2003-10-01  Alexandr Dobroslavskiy <dsas@users.sourceforge.net>

	* src/util/confval.c: fixed the error 'Segmentation fault', added the
	    new action: if it runs without flags then print all varables of
	    fidogate.conf
	* src/tick/ftntick.c: fixed TickFileAction

2003-09-27  Andrey Slusar <rusfidogate@users.sourceforge.net>
	
	* src/common/histdb.c: add check hi_file (thanks to Alex Soukhotine)
	* build/config.make.in: add ARC_RAR
	* configure: add RAR, fix checking version inn, fix DOMAINNAME
	* scripts/nodelist/nl-autoupd: fix path to sumcrc, name of nodelist
	    and many bugfixes

2003-09-26  Andrey Slusar <rusfidogate@users.sourceforge.net>
	
	* src/common/lock.c: fix remove [f]areas.bbs (thanks to
	    Zhenya Kaluta)
	* src/toss/runinc.c: add reading fidogate.conf, fix DiskFree*
	    (thanks to Zhenya Kaluta), fix getopt and usage (thanks to
	    Alexandr Dobroslavskiy), fix path to ftntickpost
	* configure: add inn2.4, fix path to inews, sendmail, rnews
	* scripts/maintenance/logdaily.in: fix paths to scripts
	* scripts/outbound/out-ls.in: change die to next
	* scripts/outbound/outb-kill.in: change paths to scripts
	* scripts/outbound/outb.in: change paths to scripts
	* src/areafix/areafix.c: fix AutoCreateSubscribeNodes and
	    AutoCreateSubscribeFileechoNodes, fix unsubscribe (thanks to
	    Alexandr Dobroslavskiy)
	* src/common/node.c: fix FTN_ACL (thanks to Alexandr Dobroslavskiy)
	* src/gate/ftninpost.c: fix rename to bad
	* src/gate/rfc2ftn.c: change EchoGateAlias
	* src/toss/ftntoss.c: fix tosting (thanks to Alexandr Dobroslavskiy)
	* doc/FAQ.ru: add russian FAQ
	* doc/news/leafnode: add leafnode-util (thanks to Elohin Igor)
	* doc/README.en: rename to README
	* doc/README: rename to README.ru
	* packages/freebsd: update freebsd-port

2003-03-16  Dmitry Fedotov <dyff@users.sourceforge.net>

	* configure: default sysconfdir set to '<prefix>/etc'
	* doc/examples/dyff/spy: move to spy.sample
	* src/common/node.c: fix disable ftnacl

2003-03-09  Dmitry Fedotov <dyff@users.sourceforge.net>

	* src/common/dir.c: fix recursive directory creation
	* src/tick/ftnhatch.c: recode description
	    changed aka selection (thanks to Andrey Zhuravlev)
	* src/gate/ftninpost.c: fix sendmail -f option.
	* src/toss/Makefile: fix ngoper set mode
	* examples: rename all config examples to *.sample
	* configure: fix display error messages
	    remove configdir to sysconfdir parameter.

2003-03-08  Dmitry Fedotov <dyff@users.sourceforge.net>

	* Makefiles: changed any installation path
	* src/gate/ftninpost.c: change sendmail comand line inserting for
            "From" field (requested by Yuriy Talakan)

2003-03-07  Dmitry Fedotov <dyff@users.sourceforge.net>

        * src/toss/toss.c: fix message header address selection. (thanks to
	    Andrey Zhuravlev)

2003-03-04  Dmitry Fedotov <dyff@fidogate.spb.ru>

        * Fix: perl and shell definations (thanks to Andrey Slusar)
        * packages/rmp/fidogate.spec: update (thanks to Andrey Slusar)
        * src/gate/send-fidogate.in: fix RFC2FTN path (thanks to Andrey Slusar)
        * Fix: creation non-system directory 

2003-03-02  Dmitry Fedotov <dyff@fidogate.spb.ru>

        * src/gate/ftninpost.c: fucked up
        * src/gate/ftn2rfc.c: fixed IGNORE_FROM_IFREPLY (thanks to Andrey
	    Zhuravlev)
	* src/common/tick.c: fixed FECHO_PASSTHROUGHT (thanks to Andrey
	    Zhuravlev)

2003-02-17  Dmitry Fedotov <dyff@fidogate.spb.ru>

        * Makefiles: rewrite to automake version.
        * packages/rmp/fidogate.spec: update (thanks to Andrey Slusar)
        * src/gate/ftn2rfc.c:
	* src/tick/ftntick.c: rotate DontIgnoreSoftCR option
            Fixed AKA selection  (patch from Andrey Zhuravlev)
        * src/gate/rfc2ftn.c: configure option --enable-tzutc-kludge move to
	    UseTZUTCKludge config option (thanks to Ivan A. Fedorov)
        * src/areafix/areafix.x: fixed unsubsceabe with wildcard function
        * src/common/msgid.c: fixed ^AREPLY kludge (patch from Oleg Demidovich)
	* Makefiles: fixed install path for rpm build (patch from Alexey
	    Lebedeff)         
	* src/common/packet.c: added invalid date correction (patch from Alexey
	    Kotikov)
	* src/common/areas.c: fixed mixed case echomail area name. (patch from
	    Andrey Zhuravlev)


2002-12-23  Dmitry Fedotov <dyff@fidogate.spb.ru>

	* configure: add option --without-rsf for disable send_fidogate
	  function.
	* src/common/packet.c: correction year and day of month in pkt header
	    if it equal zero. (thanks to Vadim Dyagilev)
	  add support nonstandart format date in message header generated by
	    squish and t-mail pktmake (requested by Alex Kotikov).

2002-12-04  Dmitry Fedotov <dyff@fidogate.spb.ru>

	* src/tick/ftnhatch.c: expand PassthroughtBoxesDir path.

2002-11-30  Dmitry Fedotov <dyff@fidogate.spb.ru>

	------- CVS ci -------------------------------------------------------

	* doc/examples/dyff/fidogate.conf.cfg: AutoCreateNewgroupCmd path fixed.
	* doc/README: any updates.
	* configure: search perl5. search rnews in newsbin directory.

2002-11-28  Dmitry Fedotov <dyff@fidogate.spb.ru>

	------- CVS ci -------------------------------------------------------

	* src/areafix/areafix.c: fixed non-pastthru fareas creation.

2002-11-27  Dmitry Fedotov <dyff@fidogate.spb.ru>

	------- CVS ci -------------------------------------------------------

	* remove doc: CHANGES.rus.
	* remove scripts: report_areas_changes, runtoss, rununpack, runin,
	  runmail, runnews, runout, rungate, runafutil.
	* src/toss/ftnexpire.c: fixed command line options `-t'.
	* src/tick/ftntick.c: fixed dupe check.
	* src/gate/rfc2ftn.c: fixed batch file opening.
	* src/common/dbz.c: remove malloc and calloc defination.
	* src/areafix/areafix.c: fixed bug - passive/active & uplink not found.
	* any perl scripts: adding expand path from config.
	* doc/examples/dyff/fidogate.conf.cfg: add newsspooldir and sendmail,
	  checking in configure script
	* configure: add checking for uudecode.
	* src/toss/runinc.c: send_fidogate stending up.
	* scripts: change path from absolute to get from config
	* src/areafix/runafutil.sh: fix path to ftnafutil.
	* src/toss/ftnexpire.c: fix `-t' option.
	* src/tick/ftntick.c: fix dupe check.

2002-11-15  Dmitry Fedotov <dyff@fidogate.spb.ru>

	------- CVS ci -------------------------------------------------------

	* src/tick/ftntick.c: fix autocreation creation directory permission.
	* src/gate/rfc2ftn.c: fix alias select. Now select with aka matching.
	  add areasbbs lookup for selecting aka.
	  add calculating our aka from areasbbs uplink address if aka evident
	    not defined in areasbbs.
	  fix ^AMSGID address for most aka.
	* src/common/config.c: fix aka matching if uplink was set.
	* src/gate/ftn2rfc.c: fix bug with if ACTIVE_LOKKUP not defined.
	    (thanks to Sergey Kartashoff)

2002-11-13  Dmitry Fedotov <dyff@fidogate.spb.ru>

	------- CVS ci -------------------------------------------------------

	* src/areafix/areafix.c: fix bags in sending rules functions.
	* src/areafix/ftnafutil.c: remove old command 'unsubscribe'. Now it
	  do from areafix.

2002-11-11  Dmitry Fedotov <dyff@fidogate.spb.ru>

	------- CVS ci -------------------------------------------------------

	* doc/examples/dyff/packing.cfg: fixed default path for ftninpost
	  (thanks to Andrey Zhuravlev)
	* doc/README: add `-e' and `-n' keys description for (f)areas.bbs.
	  add discription for `KillReadonly' fidogate.conf dirictive.
	* src/areafix/areafix.c: add loging information from cmd_new if it
	  working internal.
	  wildmatch forward requested area created from cmd_new. 
	  fixed '\r\n' in areafix answer to requested link and forward request.
	  fixed permission for cmd_new from forward request
	* src/common/dir.c: adding recursion mkdir function.
	* src/toss/ftnpack.c: fixed maxarc.

2002-10-19  Dmitry Fedotov <dyff@fidogate.spb.ru>

	------- CVS ci -------------------------------------------------------

	* src/areafix/areafix.c:
	  add "passive AREA" and "active AREA" areafix command.
	  added debug information for forbidden area search and authorization.
	  remove "vacation" and "comment" areafix command.
	  add autocreaation AutoCreateFechoPath directory.
	  editing AutoCreateCmd parameters, added default value for null value
	   variable, added zone and passthru flag (and readonly).
	  fixed "list" areafix command "AreafixAvailPrintsAllAreas" &
	   "FStatusAreaFixList" now work.
	  fixed araefix subscribe limits calculate.
	  fixed subscibe from different zone.
	  add wildmath support in requested area and listed in uplinks config.
	  fixed area name for any arefix messages and request to uplink.
	  added default state "S" for autocreation area form cmd_new.
	  added wildmatch support for "delete" areafix command.
	* src/areafix/ftnafutil.c: remove "subscribe" command. Add log message
	  if no uplinks record found for processing area.
	* src/common/areasbbs.c: remove areasbbs_delete function.
	* src/common/messages.c: cat "\n" simbol from debug line.
	* src/common/uplinks.c: fixed reading areas from uplinks config and
	  files listed in it.
	* src/common/wildmat.c: wildmatch now support cross search wildmat.
	* config: added redefine all paths.
	* src/areafix/areafix.c: remove CREATE_FECHO_PASSTHROUGHT define.
	* Makefiles: adding libtool linking.
	* packages/freebsd: adding freebsd port.
	* src/common/areas.c: added multi-string AreasXlate support.

2002-09-29  Dmitry Fedotov <dyff@fidogate.spb.ru>

	------- CVS ci -------------------------------------------------------

	* src/areafix/areafix.c: fixed areaname last char cut, when
	  unsubscreabing from uplink.
	* Makefiles: edit any Makefiles.
	* packages/rpm: adding rpm make config.

2002-09-23  Dmitry Fedotov <dyff@fidogate.spb.ru>

	------- CVS ci -------------------------------------------------------

	* src/areafix/areafix.help: removed.
	* src/areafix/rulesup.pl: removed.
	* src/areafix/ftnafutil.c: added rulesup function.
	* src/areafix/areafix.c: Fixed zone subscribtion for fidonet.
	 Write rulesup_function.
	* doc/README.en: added.
	* doc/README: Some info write.

2002-09-22  Dmitry Fedotov <dyff@fidogate.spb.ru>

	------- CVS ci -------------------------------------------------------

	* src/areafix.c: added function listall with arealist from areas.bbs +
	  echolist defined in uplinks config.

	* Fixed any errors in make scripts.
	    (thanks to Sergey Kartashoff)
	* Fixed error in work areafix: answer from areafix was had name
	  XFix Daemon Daemon.
	* Fixed error in work areafix: created passthru areas with dir field
	  ##- instread #-.
	* Fixed error in work ftntick with AutoCreateFileechoLine option
	    (thanks to Alexander Mikhalchenko)
	* areafix.c: fix bug with function AutoCreateSubscribeNodes.
	    (thanks to Maxi Rovnich & Alexander Mikhalchenko)
	* Added route function: xroute, hostroute, hubroute, bossroute (see 
	  doc/README or doc/old/fidogate.txt for detals).

2002-08-07  Dmitry Fedotov <dyff@fidogate.spb.ru>

	------- CVS ci -------------------------------------------------------

	* src/areafix.c: added function listall with arealist from areas.bbs +
	  echolist defined in uplinks config.

2002-08-05  Dmitry Fedotov <dyff@fidogate.spb.ru>

	------- CVS ci -------------------------------------------------------

	* configure.in: fixed memcmp checking.
	* src/ftntick.c: fixed unlink files from inbound if area is passthrou.

2002-08-03  Dmitry Fedotov <dyff@fidogate.spb.ru>
	====================================================================
	      FIDOGATE (ex-snp patch) CVS lives now at
	      cvs.fidogate.sourceforge.net in "dp" branch
	====================================================================

	* src/toss/ftntoss.c: fixed bug with first link in areas.bbs.
	* src/common/messages.c: if ^APATH, SEEN-BY, tearline or
	  Origin line was not founded in pkt file - it's added. Added any
	  validation pkt's files (lenght fields and date).
	* configure: fixed option --enable-static.
	* src/gate/send-fidogate: fixed compitable with INN-2.3.X.
	* Fixed any memory leaks (mail): added function free_exit().

1999-2002  Dmitry Fedotov <dyff@fidogate.spb.ru>/Serge N. Pokhodyaev <snp@ru.ru>
	<any time ago it was patch for fidogate, changes only on russian>

2002-07-28  Martin Junius  <mj@m-j-s.net>

	------- CVS ci -------------------------------------------------------

	* doc/fidogate.texi (ftnhatch): added doc for new -r option.

	* src/tick/ftnhatch.c (usage): added -r --replaces FILE option.
	  (main): implemented -r --replaces FILE option.
	  (hatch): new arg replaces, passed from -r option, sets tic.replaces.

2002-07-21  Martin Junius  <mj@m-j-s.net>

	------- CVS ci -------------------------------------------------------

	* version.h (PATCHLEVEL): set to 6, version 4.4.6

	------- CVS ci -------------------------------------------------------

	* doc/fidogate.texi (Config): added documentation for this option.

	* src/gate/ftn2rfc.c (main): added DontIgnore0x8d aka
	  DontIgnoreSoftCR config option.

2002-07-15  Martin Junius  <mj@m-j-s.net>

	------- CVS ci -------------------------------------------------------

	* src/common/message.c (msg_ignore_0x8d): flag for ignoring 0x8d,
	  soft-CR, default true = remove 0x8d when it occurs in a message
	  line.
	  (msg_xlate_line): use msg_ignore_0x8d flag with c==0x8d.

	* *: updated copyright years to 1990-2002, email address to
	  mj@fidogate.org, removed Fido address.

2002-07-10  Martin Junius  <mj@m-j-s.net>

	------- CVS ci -------------------------------------------------------

	* TODO: copied latest version from old source working dir.

2002-07-09  Martin Junius  <mj@m-j-s.net>

	* ====================================================================
	* =      FIDOGATE CVS lives now at cvs.fidogate.sourceforge.net      =
	* ====================================================================
	
2001-12-27  Martin Junius  <mj@m-j-s.net>

	======= Release 4.4.5 ================================================
	------- CVS tag R445 -------------------------------------------------
	------- CVS ci -------------------------------------------------------

	* build-rpms: dito.

	* cvsexp: use version script.

	* version: new script, print version number from version.h

	* README: moved important stuff to top ;-)

	* ANNOUNCE: updated.

	* fidogate.lsm: updated.

	* fidogate.spec: changed to 4.4.5-1.7x

2001-11-27  Martin Junius  <mj@m-j-s.net>

	* sendmail/cf/redhat6-morannon.mc: orbl.org dnsbl removed, seems
	  to have ceased working. Timeout.ident set to 0 = off.

2001-10-30  Martin Junius  <mj@m-j-s.net>

	------- CVS ci -------------------------------------------------------

	* scripts/maintenance/logcheck.pl: separate hash %count for -k =
	  output killip option.

2001-10-21  Martin Junius  <mj@m-j-s.net>

	------- CVS ci -------------------------------------------------------

	* version.h (PATCHLEVEL): set to 5, version 4.4.5

	* sendmail/cf/redhat6-morannon.mc: modified m4 config file for
	  sendmail 8.11.6, using feature dnsbl.

	* scripts/maintenance/logsendmail.pl: allow [a-z] in sendmail ID,
	  sendmail 8.11.6 used longer IDs with mixed case than previous
	  versions. 

	* scripts/maintenance/logcheck.pl: changed ORxx regex to match for
	  sendmail 8.11.6 logs.

2001-08-20  Martin Junius  <mj@m-j-s.net>

	------- CVS ci -------------------------------------------------------

	* config.make (SENDMAIL_CF_DIR): changed to /usr/share/sendmail-cf
	  for RedHat 7.1.

	* sendmail/cf/redhat7-orodruin.mc: new config file for RedHat 7.1,
	  based on original redhat.mc from sendmail-cf-8.11.2-14.

2001-07-28  Martin Junius  <mj@m-j-s.net>

	------- CVS ci -------------------------------------------------------

	* scripts/maintenance/logcheck.pl: added logging of new
	  check_relay rejects for ORxx DNS blacklists.

2001-07-27  Martin Junius  <mj@m-j-s.net>

	------- CVS ci -------------------------------------------------------

	* sendmail/cf/redhat6-morannon.mc: replaced mail-abuse rbls with
	  ORBL, ORBZ, and ORDB.

2001-06-03  Martin Junius  <mj@m-j-s.net>

	* update-morannon: copy some files to /html/fidogate.

	======= Release 4.4.4 ================================================
	------- CVS tag R444 -------------------------------------------------
	------- CVS ci -------------------------------------------------------

	* fidogate.spec: added "noreplace" to %config.

2001-05-28  Martin Junius  <mj@m-j-s.net>

	------- CVS ci -------------------------------------------------------

	* src/*/*: updated copyright to 1990-2001.

	* fidogate.spec: updated.

	* fidogate.lsm: updated.

	* ANNOUNCE: updated.

	* version.h (PATCHLEVEL): changed to 4, version 4.4.4.

	* test/: re-run verify on all test cases, output is ok, with the
	  usual diffs due to summer time ./. winter time 1-byte changes in
	  packet length. Re-run all-mk-verfiy.

	------- CVS ci -------------------------------------------------------

	* test/tc.gate12/run: new test case for long References headers
	  and the problems which are now fixed. Thanx to
	  Stephan Heitbrink <heitbrink@gmx.net> for reporting the bug
	  and providing the test input news article files.

	* src/common/rfcheader.c (TMPS_LEN_GETCOMPLETE): set to
	  BUFFERSIZE, 256 is too low for e.g. long References headers.

	* examples/orodruin/fidogate.conf: dito.

	* test/cf/fidogate.conf: new Regex1stLine.

2001-05-27  Martin Junius  <mj@m-j-s.net>

	* src/common/rfcheader.c (header_read): use input buf[] of
	  BUFFERSIZE avoiding in particular problems with long References
	  header lines, sometimes > BUFSIZ = 1024.

2001-03-15  Martin Junius  <mj@m-j-s.net>

	* scripts/misc/hosts2dns.pl: default MX is now only morannon.fido.de.

2001-03-09  Martin Junius  <mj@m-j-s.net>

	* scripts/Makefile (SUBDIRS): added missing areas dir.

2001-03-04  Martin Junius  <mj@m-j-s.net>

	* update-morannon: fixed some problems, copy .lsm

	======= Release 4.4.3 ================================================
	------- CVS tag R443 -------------------------------------------------
	------- CVS ci -------------------------------------------------------

	* update-morannon: copy to /u1/archive/fidogate, too.

	* fidogate.spec: updated.

	* fidogate.lsm: updated.

	* ANNOUNCE: updated.

	* scripts/areas/areassucksync.pl: include groups already in
	  sucknewsrc in output.

2001-02-01  Martin Junius  <mj@m-j-s.net>

	* src/gate/rfc2ftn.c (main): new config options
	  DontChangeContentTypeCharset, DontProcessReturnReceiptTo.
	  (snd_mail): don't set RRREQ flag when DontProcessReturnReceiptTo
	  is enabled.
	  (snd_message): set cs_out_rfc to original value cs_in when
	  DontChangeContentTypeCharset is enabled.

2001-01-28  Martin Junius  <mj@m-j-s.net>

	------- CVS ci -------------------------------------------------------

	* scripts/outbound/outb-kill.sh: new script, remove node(s) from
	  areas.bbs, kill all outbound files.

	* scripts/outbound/outb.sh: new script, pager wrapper for out-ls.

	* src/areafix/areafix.c: print "not active" message only for
	  non-wildcard unsubscribe requests.

2001-01-27  Martin Junius  <mj@m-j-s.net>

	* src/areafix/runaftuil.sh: new script for running ftnafutil.

2001-01-16  Martin Junius  <mj@m-j-s.net>

	* scripts/areas/areassucksync.pl: new option -g, INN-style
	  newsgroup selection with wildcards.

2001-01-13  Martin Junius  <mj@m-j-s.net>

	* src/areafix/ftnafutil.c (main): made n_flag global.
	  (do_areasbbs): don't delete/mail/change if n_flag ist set.

2001-01-07  Martin Junius  <mj@m-j-s.net>

	------- CVS ci -------------------------------------------------------

	* version.h (PATCHLEVEL): set to 3, version 4.4.3.

	* scripts/areas/areassucksync.pl: new script fro synchronizing
	  areas, areas.bbs, sucknewsrc, remote NNTP server newsgroups list.
	  At first, it checks groups from areas.bbs with links against
	  sucknewsrc and writes sucknewsrc entries to retrieving not yet
	  sucked groups.

	* scripts/maintenance/logcheck.pl: TH_RSS set to 50.

	* src/areafix/ftnafutil.c (usage, do_cmd): new command "listdownlinks".
	  (do_areasbbs): new command DO_LISTDOWNLINKS.
	  (do_cmd): call cf_i_am_a_gateway_prog() for listdownlinks.
	  (do_cmd): renamed to "listgwlinks".

2001-01-04  Martin Junius  <mj@m-j-s.net>

	------- CVS ci -------------------------------------------------------

	* scripts/areas/areasbbssync.pl: moved from ../misc/ to here.

	* scripts/areas/Makefile: new subdir for script managing areas,
	  areas.bbs, sucknewsrc etc. synchronization.

2001-01-02  Martin Junius  <mj@m-j-s.net>

	* scripts/outbound/out-ls.pl: perl5'ified, rewritten to use
	  config.pl and new %CONFIG_dosdrive, %CONFIG_zone.

	* config.pl (CONFIG_read): special treatment for DosDrive and Zone 
	  config statement, store in %CONFIG_dosdrive and %CONFIG_zone
	  hashes. 

2000-12-30  Martin Junius  <mj@m-j-s.net>

	* fidogate.spec: seq dir was missing from %files.

	* src/ffx/ffxmail.sh: morannon ist jetzt 242:1000/2

	* scripts/run/runpoll-binkd.sh (BOSSNODE): ist jetzt 242:1000/2

2000-12-29  Martin Junius  <mj@m-j-s.net>

	* scripts/run/runpoll-binkd.sh: modified for binkd 0.9.4.

2000-11-26  Martin Junius  <mj@fido.de>

	* build-rpms: make sure to move newer .tar.gz from /var/tmp to
	  /usr/src/redhat/SOURCES. 

	======= Release 4.4.2 ================================================
	------- CVS tag R442 -------------------------------------------------
	------- CVS ci -------------------------------------------------------

	* fidogate.spec: updated.

2000-11-25  Martin Junius  <mj@fido.de>

	------- CVS ci -------------------------------------------------------

	* src/ffx/ffxqt.c (run_ffx_cmd): only supply -f FQDN option for
	  rmail command.

2000-11-18  Martin Junius  <mj@fido.de>

	* build-rpms: new script to run rpm -ba more easily.

	------- CVS tag R442test1 for rpm building test ----------------------
	------- CVS ci -------------------------------------------------------

	* fidogate.spec: updated.

	* fidogate.lsm: updated.

	* README: updated.

	* ANNOUNCE: updated.

	* test/tc.*: updated verify files.

	------- CVS ci -------------------------------------------------------

	* src/ffx/ffxrmail.pl: new option -f RELAY, sets -pFFX:RELAY for
	  sendmail, if FFXRmailSendmail already contains a -p option.

	* src/ffx/ffxqt.c (run_ffx_cmd): new function for running ffx commands.
	  (exec_ffx): use run_ffx_cmd().
	  (run_ffx_cmd): now does proper fork() and execv(), avoiding
	  security problems with system().

	------- CVS ci -------------------------------------------------------

	* version.h (PATCHLEVEL): set to 2, version 4.4.2.

	* test/tc.ffx/run: test ffxqt, too.

	* src/ffx/ffx.c (main): reset most command line options to default 
	  for setuid ffx.

	* src/ffx/ffxqt.c (st_ffx): new field fqdn.
	  (parse_ffxcmd): removed FFXUncompress parsing.
	  (parse_ffx): parse FQDN in U line, include in debug() output.
	  (exec_ffx): no longer support uncompressing.

2000-11-17  Martin Junius  <mj@fido.de>

	* test/tc.ffx/run: more output.

	* src/ffx/ffx.c (main): option -n ressurected, but ignored for
	  compatibility.
	  (ffx): initialize ret.

	------- CVS ci -------------------------------------------------------

	* src/*/*.c (main): removed extra return after exit().
	
	* src/common/exit.c: removed entirely.

	* src/include/fidogate.h (exit): removed #define.

	* src/ffx/ffx.c: removed data_*, DATA_* config stuff.
	  (usage): removed -n.
	  (main): removed -n.
	  (main): removed reading FFXData* config stuff.
	  (ffx): removed compr* args to function.
	  (ffx): add FQDN to U line in control file.
	  (ffx): no longer calls external command, directly copies stdin to
	  data file.
	  (main): ressurected FFXDataFlav / data_flav ;-)

2000-10-18  Martin Junius  <mj@fido.de>

	------- CVS ci -------------------------------------------------------

	* src/toss/dbz.c: use #include "fidogate.h"

	* src/*/*.c: got rid of all strcpy!!! Only the bison generated
	  code in parsedate.c contains some strcpy(), strcat().

	* src/toss/dbz.c (enstring): removed, replaced by strsave2().

	* src/common/msgid.c (s_msgid_rfc_to_fido): use str_copy().

	* src/common/hosts.c (hosts_parse_line): use new strsave2().

	* src/common/xalloc.c (strsave): changed to use str_copy().
	  (strsave2): new function like strsave(), saving concatenation of 
	  2 strings.

	* src/common/outpkt.c (outpkt_fopen): fixed format error.

	* src/common/parsedate.y: removed old test main().

	* src/common/date.c (date_buf): major changes to formatting code,
	  avoiding unsafe strcpy() and sprintf().
	  (date_buf): new argument len to check buffer length against
	  overflows. 

	* src/common/acl.c (acl_parse_line): use strsave().
	  (Argify): dito.

2000-10-17  Martin Junius  <mj@fido.de>

	------- CVS ci -------------------------------------------------------

	* src/tick/ftntick.c (do_tic): dito.

	* src/gate/rfc2ftn.c (rfc_parse): dito.
	  (mail_sender): dito.

	* src/gate/ftn2rfc.c (unpack): dito.

	* src/ffx/ffxqt.c (do_ffx): get rid of strcpy().

	* src/toss/ftnpack.c (new_arc): fixed format error.

	* src/*/*.c: various old rename_bad() removed.

	* src/common/file.c: new module containing file-oriented functions.
	  (rename_bad): new function consolidating various rename_bad()
	  scattered in the FIDOGATE source.

	* src/common/misc.c (str_change_ext): new function, see below.

	* src/areafix/areafix.c (change_ext): new, safer function for
	  changing the file extension. The old strcpy() code *should* have 
	  been ok, but one never knows ... ;-)
	  (NEWEXT): macro as wrapper for change_ext(), assuming n=MAXPATH.
	  (change_num): new function, changing extension to "oNN".
	  (NEWNUM): macro as wrapper, n=MAXPATH.
	  (rewrite_areas_bbs): change to use new NEWEXT(), NEWNUM(),
	  avoids using strcpy(), sprintf().
	  (change_ext): renamed to str_change_ext() and moved to misc.c

2000-10-08  Martin Junius  <mj@fido.de>

	* src/toss/ftnexpire.c (main): dito.

	* src/toss/ftntoss.c (main): dito.

	* src/tick/ftnhatch.c (hatch): dito.

	* src/common/packet.c (pkt_get_hdr): fixed format warning.

	* src/include/prototypes.h: supply all printf-style function with
	  a GNU-C specific __attribute__(), __attribute__() defined to
	  nothing for non-GNU-C.

2000-08-27  Martin Junius  <mj@fido.de>

	* scripts/outbound/out-ls.pl: some changes to get it running
	  again, needs major rewrite.

2000-06-28  Martin Junius  <mj@fido.de>

	* src/common/misc.c (str_printf): make very sure that buf[] is 0
	  terminated, see comment.

2000-06-03  Martin Junius  <mj@fido.de>

	------- CVS ci -------------------------------------------------------

	* scripts/misc/hosts2dns.pl: new script, converting FIDOGATE hosts
	  list to DNS MX records.

2000-06-01  Martin Junius  <mj@fido.de>

	------- CVS ci -------------------------------------------------------

	* scripts/maintenance/logcheck.pl: more bells and whistles ... ;-)

2000-04-19  Martin Junius  <mj@fido.de>

	------- CVS ci -------------------------------------------------------

	* scripts/run/Makefile (install): no more special install target
	  for point and orodruin.

	* scripts/run/runpoll.sh: updated.

	* scripts/run/runpoll-binkd.sh: updated.

	* scripts/run/runpoll-orodruin.sh: updated.

2000-04-11  Martin Junius  <mj@fido.de>

	======= Release 4.4.1 ================================================
	------- CVS tag R441 -------------------------------------------------
	------- CVS ci -------------------------------------------------------

	* src/common/rematch.c: include <regex.h> after #ifdef.

	------- CVS ci -------------------------------------------------------

	* config.make (HTMLDIR): changed to /html/fidogate, sync'ed with
	  http://www.fido.de/fidogate/

	* Makefile (install-html): new target for installing online docs.

	------- CVS ci -------------------------------------------------------

	* src/ffx/ffxnews.sh: added tux.

	* src/ffx/runffx.sh: added ftnpack for tux.

	* src/ffx/ffxmail.sh: added tux.fido.de, clean-up.

	------- CVS ci -------------------------------------------------------

	* README: updated.

	* fidogate.lsm: updated.

	* ANNOUNCE: updated.

	* src/gate/ftn2rfc.c (unpack): tl_clear() all textlists at end of
	  main loop.
	  (unpack): dito before all continue's.
	  (unpack): dito for MsgBody body.
	  (unpack): memory leaks seem to be fixed now.

	* test/tc.memleak/run2: test script for running modified ftn2rfc.

	* test/tc.history/run2: dito.

	* test/tc.history/run1: adapted to new fidogate.conf

2000-04-10  Martin Junius  <mj@fido.de>

	* ANNOUNCE: updated.

	------- CVS ci -------------------------------------------------------

	* src/gate/rfc2ftn.c (snd_mail): fixed memory leak, tl must be
	  cleared after for loop.

	* test/tc.memleak/run1: new test case for memory leaks in various
 	  FIDOGATE programs, starting with rfc2ftn.

2000-03-07  Martin Junius  <mj@fido.de>

	------- CVS ci -------------------------------------------------------

	* ANNOUNCE: updated.

	* fidogate.spec: updated.

	* fidogate.lsm: updated.

	* version.h (PATCHLEVEL): changed to 1, version 4.4.1.

2000-03-06  Martin Junius  <mj@fido.de>

	* src/gate/ftn2rfc.c (unpack): only accept non-NULL returns from
	  charset_chrs_name(), make double sure that cs_in is non-NULL.

	* src/charset/charset.c (charset_set_in_out): return ERROR if in
	  or out is NULL.

2000-02-21  Martin Junius  <mj@fido.de>

	* fidogate.lsm: updated.

	* ANNOUNCE: updated.

2000-02-11  Martin Junius  <mj@fido.de>

	* doc/fidogate.texi: update version to 4.4.

	* update-morannon: upload script.

	======= Release 4.4.0 ================================================
	------- CVS tag R440 -------------------------------------------------
	------- CVS ci -------------------------------------------------------

	* README: updated.

	* ANNOUNCE: updated, old changes moved to README.

	* fidogate.lsm: updated.

2000-01-30  Martin Junius  <mj@fido.de>

	------- CVS ci -------------------------------------------------------

	* fidogate.spec: some fixes.

	* scripts/Makefile (SUBDIRS): removed cnews, inn.

	------- CVS tag R440test3 for rpm building test ----------------------
	------- CVS ci -------------------------------------------------------

	* fidogate.spec: added dir /etc/news to %files, %config.

	* examples/rpm/*: rpm config using Fido address 2:2499/999.1 with
	  a point configuration.

	* examples/rpm/: new dir for rpm example config files.

	* scripts/inn/: removed entirely.

	* fidogate.spec: added make install-config to %install.

	* Makefile (install-config): new target for installing example
	  config file for rpm.

	* fidogate.spec: include mainly the FIDOGATE dirs in %files,
	  config files are still missing.

	* src/gate/rfc2ftn.c (main): initialize fp=NULL.

	* src/common/mime.c (mime_dequote): initialize c=0.

	* src/common/binkley.c (bink_attach): removed #if 0 old code.
	  (bink_attach): changed log() message, removed unused char *flo.

	* fidogate.spec: removed ffx stuff from %files.

	------- CVS tag R440test2 for rpm building test ----------------------
	------- CVS ci -------------------------------------------------------

	* cvsexp: remove old stuff from previous csvexp first.

	* Makefile (INSTALLDIRS): replace HTMLDIR/log with HTMLLOGDIR.

	* config.make (HTMLDIR): changed to /html/mj/fidogate.

	* Makefile (install-dirs): add PREFIX when checking -d.
	  (INSTALLDIRS): added HTMLDIR/log.

	* cvsexp: archive for tests renamed to fidogate-test-x.x.x.tar.gz

	* Makefile (install-spec-src): tar renamed, includes copying
	  source .tar.gz to RPMSOURCESDIR. Run "make install-spec-src"
	  after running "cvsexp 4.4.0", then "rpm -ba
	  RPMSPECSDIR/fidogate.spec" to build rpms.

2000-01-29  Martin Junius  <mj@fido.de>

	------- CVS tag R440test1 for rpm building test ----------------------
	------- CVS ci -------------------------------------------------------

	* Makefile (install-spec): new target for installing fidogate.spec.

	* config.make (RPM*DIR): added macros for RPM build directories.

	* cvsexp: extended usage help.

	* fidogate.spec: new rpm spec file, not yet complete.

	------- CVS ci -------------------------------------------------------

	* test/tc.*/run.verify: updated.

	* src/common/message.c (NOBREAK_LINE_LENGTH): new #define set to 79.
	  (msg_format_buffer): don't break lines with length <=
	  NOBREAK_LINE_LENGTH, this avoids problems with, eg quoted,
	  messages where lines are hard formatted to more than FIDOGATE's
	  MessageLineLength chars per line.

	* test/tr.grepvar: replace version numbers in packet header output 
	  with x.x, bink arcmail extension with .xx0. 

2000-01-28  Martin Junius  <mj@fido.de>

	------- CVS ci -------------------------------------------------------

	* *: updated copyright notice to 1990-2000.

	* version.h: version set to 4.4.0 stable.

	* src/charset/charset.map: new mappings contributed by "Mathias
	  Pannike" <st000320@hrzpub.tu-darmstadt.de>, completing missing
	  mappings -> x-ibmpc, x-mac.

1999-12-28  Martin Junius  <mj@fido.de>

	* scripts/misc/areasbbssync.pl: added ger.* to PATTERN,
	  binaer|dateien to NPATTERN.

1999-11-25  Martin Junius  <mj@fido.de>

	* scripts/www/gate.cgi.pl: using <NEWSSPOOLDIR> doesn't work
	  because it points to .../articles.

	* scripts/Makefile (SUBDIRS): must add www to SUBDIRS.

	* version.h (PATCHLEVEL): set to 7 for next release, forget to set 
	  this to 6 for release 4.3.6.

1999-11-21  Martin Junius  <mj@fido.de>

	======= Release 4.3.6 ================================================
	------- CVS tag R436 -------------------------------------------------
	------- CVS ci -------------------------------------------------------

	* examples/README: updated.

	* fidogate.lsm: updated.

	* ANNOUNCE: updated.

	* scripts/maintenance/logcheck.pl: some clean-ups, now logs
	  separately mail-abuse.org RBL, DUL, RSS rejects.

	* scripts/Makefile (install): "make install" now recurses into
	  subdirs. 

	* scripts/run/Makefile: standard "make install" installs nothing,
	  "make install-point" installs standard runpoll, "make
	  install-orodruin" the special runpoll/runpolli for orodruin.

	* sendmail/cf/: updated some example files.

	* examples/nevyn/: removed.

	* examples/morannon/: updated example files.

	* examples/orodruin/: updated example files.

1999-11-09  Martin Junius  <mj@fido.de>

	* scripts/maintenance/logcheck.pl: always show relay for RBL
	  reject summary.

1999-11-07  Martin Junius  <mj@fido.de>

	* scripts/www/gate.cgi.pl: changed to NEWSPOOLDIR/outgoing,
	  removed <SPOOLDIR>.

1999-10-20  Martin Junius  <mj@fido.de>

	* scripts/maintenance/logcheck.pl: added processing of RBL rejects.

	* sendmail/cf/mrbl.p3: sendmail config file patch required for new 
	  RBL settings in redhat6-morannon.mc

	* sendmail/cf/redhat6-morannon.mc: added RBL feature, see
	  http://www.mail-abuse.org/ 

1999-10-18  Martin Junius  <mj@fido.de>

	* scripts/maintenance/logcheck.pl: check for "ruleset=check_xxx".

1999-10-17  Martin Junius  <mj@fido.de>

	* sendmail/cf/redhat6-morannon.mc: error messages will be send to
	  postmaster-errors.

	------- CVS ci -------------------------------------------------------

	* scripts/www/gate.cgi.pl (my_ps_news): adapted to new ps output
	  of procps-2.0 package.

	* scripts/maintenance/logsendmail.p: fixed orphan printf.

	* scripts/misc/Makefile (install): install senduumail in BINDIR.

	* scripts/maintenance/logcheck.pl: re patterns adapted for
	  sendmail 8.9.x

1999-10-10  Martin Junius  <mj@fido.de>

	* Makefile (INSTALLDIRS): added BTBASEDIR/tick,ffx directories.
	  (install-uuin): added new target to set correct permissions for
	  uuin. 

1999-10-09  Martin Junius  <mj@fido.de>

	* sendmail/cf/redhat6-morannon.mc: add confDOMAIN_NAME to avoid
	  problems with reverse mapping pointing to faho.rwth-aachen.de.

1999-10-07  Martin Junius  <mj@fido.de>

	* scripts/maintenance/runchklock.sh: new script removing stale
	  FIDOGATE lock files.

	* sendmail/cf/redhat6-morannon.mc: use /etc/majordomo.aliases.

1999-10-04  Martin Junius  <mj@fido.de>

	------- CVS ci -------------------------------------------------------

	* doc/fidogate.texi (Config): updated.
	  (config.h): updated.

	* src/gate/ftn2rfc.c (main): implemented config option
	  NetMailCharsetUse1st.

	* src/common/message.c (msg_get_line_length): new function getting 
	  config value MessageLineLength.
	  (msg_format_buffer): changed to use new msg_get_line_length().

	* config.h (MAX_LINELEN): removed.

	* examples/orodruin/fidogate.conf: included
	  NetMailCharsetUse1st and MessageLineLength.

1999-09-12  Martin Junius  <mj@fido.de>

	* src/charset/Makefile (install): install charset map source, too.

	* src/gate/send-fidogate.sh (FIDOGATE_LOGFILE): log output to
	  %G/log-news. 

1999-09-05  Martin Junius  <mj@fido.de>

	* sendmail/cf/redhat6-morannon.mc: new config file for morannon
	  with RedHat 6.0 / sendmail 8.9.

1999-09-01  Martin Junius  <mj@fido.de>

	* src/common/binkley.c (bink_mkdir): log() if mkdir() fails.

1999-08-22  Martin Junius  <mj@fido.de>

	* ANNOUNCE: updated.

	* README: updated.

	* scripts/run/runpoll-binkd.sh: send mail to DUMMYADDR to force
	  polling, BinkD won't poll for empty FLO file.

1999-08-08  Martin Junius  <mj@fido.de>

	======= Release 4.3.5 ================================================
	------- CVS tag R435a ------------------------------------------------
	------- CVS ci -------------------------------------------------------

	* sendmail/mklinks (DIRS): create DIRS if needed.

	------- CVS tag R435 -------------------------------------------------
	------- CVS ci -------------------------------------------------------

	* fidogate.lsm: updated.

	* ANNOUNCE: updated.

	* test/tc.flo/run: test case adapted to new bink_attach() behaviour.

	------- CVS ci -------------------------------------------------------

	* config.make
	  (DEFAULT_F_NEWSLIBDIR): changed for INN 2.2, RedHat 6.0.
	  (DEFAULT_F_NEWSSPOOLDIR): dito.

1999-08-04  Martin Junius  <mj@fido.de>

	* src/gate/rfc2ftn.c (print_tear_line): output standard tear line, 
	  if none of the X headers can be found, added X-GateSoftware.

1999-08-01  Martin Junius  <mj@fido.de>

	------- CVS ci -------------------------------------------------------

	* test/tc.bink/run: added some tests with ftnpack.

	* src/common/binkley.c (bink_attach): pass bsy flag to flo_close()!

1999-07-23  Martin Junius  <mj@fido.de>

	------- CVS ci -------------------------------------------------------

	* src/toss/ftnpack.c (do_arcmail): call bink_attach() also for new 
	  arcmail files.

	* src/common/binkley.c (bink_attach): now searches thru FLO file
	  for file attachment. If the file attachment already is an entry
	  in the FLO it will be skipped.

1999-07-18  Martin Junius  <mj@fido.de>

	* src/common/flo.c (flo_openx): additional argument flav, needed
	  for bink_attach().
	  (flo_openx): argument renamed to apmode, if TRUE open in "a+" mode.

	* src/common/binkley.c (bink_attach): old FLO open code replaced
	  with call to new function flo_openx().
	  (bink_attach): use flo_close() as well.

	* src/common/flo.c (flo_openx): if loop is repeated, don't remove
	  BSY file.

	* test/tc.bink/run: new test case for bink_attach(), using
	  ftnfattach utility.

	* src/common/binkley.c (main): removed test main() because it was
 	  actually the intended to be the same code as ftnfattach.c:main()
 	  ;-)

	* sendmail/cf/redhat6-orodruin.mc: new orodruin configuration,
	  merging old orodruin[-check].mc and RedHat 6.0
	  /usr/lib/sendmail-cf/cf/redhat.mc.

	* sendmail/cf/Makefile: adapted to new config.

	------- CVS ci -------------------------------------------------------

	* doc/fidogate.texi (config.make): added SENDMAIL_CF_DIR.

	* sendmail/mkclean: new script, removing symlinks to
	  /usr/lib/sendmail-cf.

	* sendmail/Makefile: new Makefile for sendmail dir.

	* sendmail/mklinks (DIRS): new script, creating links to original
	  sendmail m4 config files living under /usr/lib/sendmail-cf.

	* config.make (SENDMAIL_CF_DIR): new macro setting directory,
	  where sendmail m4 configuration files are installed.

1999-07-03  Martin Junius  <mj@fido.de>

	* src/common/binkley.c (main): added test main().

	* src/common/flo.c (flo_openx): renamed old flo_open() because of
	  new argument wpmode. If wpmode is TRUE, the function will try
	  again if the access() check fails after sucessfully locking the
	  FLO file.
	  (flo_open): wrapper for flo_openx(), wpmode=FALSE.
	  (flo_file): new function returning flo_fp.

1999-06-27  Martin Junius  <mj@fido.de>

	------- CVS ci -------------------------------------------------------

	* doc/fidogate.texi (ftntickpost): new section.

	* src/tick/ftntickpost.pl: new postprocessor skeleton script for
	  ftntick. 

	* doc/fidogate.texi (ftntick): add -x --exec SCRIPT.

	* version.h (PATCHLEVEL): set to 5, version 4.3.5

	* src/tick/ftntick.c (usage): new -x --exec SCRIPT option.
	  (main): implemented -x --exec SCRIPT option.
	  (do_tic): if -x option is set, run script after sucessfully
 	  processing TIC file.

1999-06-20  Martin Junius  <mj@fido.de>

	* ANNOUNCE: updated.

	======= Release 4.3.4 ================================================
	------- CVS tag R434a ------------------------------------------------
	------- CVS ci -------------------------------------------------------

	* src/include/prototypes.h: #undef strtok(), strtok_r, may be
	  defined as inline code when compiling with -O on Linux.

	------- CVS tag R434 -------------------------------------------------
	------- CVS ci -------------------------------------------------------

	* test/tc.*: checked and updated run.verify for all cases.

	------- CVS ci -------------------------------------------------------

	* ANNOUNCE (WARNING): updated.

	* fidogate.lsm: updated.

	* examples/point/newsfeeds: example newsfeeds entry for INN 1.x

	* version.h (PATCHLEVEL): changed to 4, version 4.3.4.

	* examples/point/*: added more example files for the configuration 
	  as described in fidogate.texi.

	* doc/fidogate.texi (Config): added description of Regex1stLine.

	* examples/*/fidogate.conf: updated with regex patterns from test
	  cases. 

	* src/common/rematch.c (regex_init): removed default
	  initialization with compiled-in regex patterns.

	* src/gate/rfc2ftn.c (get_name_from_body): append 2nd line only if 
	  2nd line doesn't start with '>', '|', ':'.

1999-06-17  Martin Junius  <mj@fido.de>

	------- CVS ci -------------------------------------------------------

	* test/tc.1stline/run: new test case for 1st line pattern matching.

	* src/gate/rfc2ftn.c (get_name_from_body): concatenate 1st and 2nd 
	  non-empty line from message body for pattern matching.

	* src/common/message.c (is_blank_line): no longer static.

	* examples/point/fidogate.conf: dito.

	* examples/win32/fidogate.conf: dito.

	* examples/morannon/fidogate.conf: dito.

	* examples/orodruin/fidogate.conf: added config example.

	* src/gate/rfc2ftn.c (main): added regex_init().
	  (get_name_from_body): uses regex_match() for finding address in
	  1st line, #if 0'ed old wildmatch() code.

	* src/common/rematch.c (regex_init): new function, initializes
	  regex list and processes Regex1stLine entries from fidogate.conf
	  (str_regex_match_sub): new function, copies i'th sub-expression
	  from regex match to string buffer.

1999-06-14  Martin Junius  <mj@fido.de>

	* src/common/rematch.c (regex_new): new function, alloc/init Regex
	  struct. 
	  (regex_parse_line): new function, compiling regex pattern string.
	  (regex_do_entry): new function, putting regex into linked list.
	  (regex_match): new function, matching string against list of
	  regex patterns.
	  (regex_match_sub): new function returns regmatch_t entry for
	  last matching regex.
	  (main): test main.

	* src/common/Makefile (OBJS): added rematch.o module.
	  (testrematch): added test target.

	* src/common/rematch.c: new modules, regular expression handling
	  for FIDOGATE, using POSIX regex functions, see HAVE_POSIX_REGEX in 
	  config.h

1999-06-08  Martin Junius  <mj@fido.de>

	* src/common/strtok_r.c (strtok_r_ext): changed logic
 	  somewhat. After returning from the function, *lasts will point to
 	  the beginning of the next token, 1st non-delim character, fixing 
	  problems for the typical strtok(s,DELIM_WS), then
	  strtok(NULL,DELIM_EOL) scan.
	  (strtok_r_ext): more changes, now mostly relying on strchr() to
	  do the job.
	  Thus no longer "based" on NetBSD ... ;-)

1999-06-07  Martin Junius  <mj@fido.de>

	------- CVS ci -------------------------------------------------------

	* src/common/xstrtok.c: module removed, obsoleted by strtok_r.c

	* src/common/Makefile (OBJS): removed xstrtok.o, obsoleted by new
	  module strtok_r.o

	* src/common/strtok_r.c (strtok): reimplemented using strtok_r_ext().
	  (xstrtok): dito.
	  (strtok_r): dito.

	* src/include/prototypes.h: added strtok_r.c functions and #define's.

1999-06-01  Martin Junius  <mj@fido.de>

	------- CVS ci -------------------------------------------------------

	* src/tick/ftntick.c (move): dito.

	* src/toss/ftnroute.c (do_move): #ifndef CYGWIN32 WARNING message.

	* src/common/Makefile: add strtok_r module, teststrtok test program.

	* src/common/strtok_r.c: new module for reentrant strtok()
	  variants based on NetBSD strtok_r.c

	* src/common/mime.c (mime_deheader): bugfix for processing
	  MIME_HEADER_CODE_START/END.

	* doc/fidogate.texi: major update, all program descriptions are
	  now up-to-date.

	* examples/namib.north.de/: completely removed.

	* examples/abis.abra.de/: completely removed.

1999-05-29  Martin Junius  <mj@fido.de>

	======= Release 4.3.3 ================================================
	------- CVS tag R433 -------------------------------------------------
	------- CVS ci -------------------------------------------------------

	* ANNOUNCE: updated.

	* config.h: fixed #ifdef __sun__ for Solaris 2.x, using #ifdef
	  __svr4__. 

	* src/include/declare.h: fixed for Solaris 2.x, using #ifndef
	  __svr4__.

1999-05-24  Martin Junius  <mj@fido.de>

	------- CVS ci -------------------------------------------------------

	* doc/fidogate.texi (Programs): updated, now lists all programs
 	  from the src/ directory.
	  (Programs): updated sequence of all following nodes with the
 	  program descriptions, added nodes for new programs. The
	  individual description are not yet up-to-date.

1999-05-23  Martin Junius  <mj@fido.de>

	* doc/fidogate.texi (config.h): added HAS_POSIX_REGEX description.
	  (Routing): added description of new "RemapX" command, not yet
	  implemented.

1999-05-22  Martin Junius  <mj@fido.de>

	* config.h (HAS_SNPRINTF): set for OS2.
	  (HAS_POSIX_REGEX): new #define for support of POSIX regex
	  functions regcomp(), regexec(), regerror(), regfree(); currently 
	  only set for Linux.

	------- CVS ci -------------------------------------------------------

	* fidogate.lsm: updated.

	* ANNOUNCE: updated.

	* test/tc.*: updated run.verify for all test cases, debug() output 
	  changed due to new features.

	------- CVS ci -------------------------------------------------------

	* version.h (PATCHLEVEL): set to 3 (version 4.3.3).

	* doc/fidogate.texi (Example Point): updated.
	  (Example Point 2): updated.
	  (Example Node): updated.

	* examples/point/fidogate.conf: new example config file for point
	  configuration.

	* doc/fidogate.texi: some bugfixes.

	-------- Integrated patch-1999-05-21 into main source ----------------

	* doc/fidogate.texi (Programs): updated list of %X abbreviations.
	  (Config): Oeff! Complete update of all config options, now in
	  sync with the latest examples/orodruin/fidogate.conf.
	  (Areas): updated.
	  (Aliases): updated.
	  (Passwd): updated.
	  (Areas.bbs): updated.

	* src/gate/ftn2rfc.c: removed #ifdef AI_2, now the default.

	* src/gate/rfc2ftn.c (snd_message): set cs_in = CHARSET_STDRFC,
	  currently "iso-8859-1". Some messages are 8bit, but don't
	  contain MIME headers.
	  (snd_message): set cs_out to CHARSET_STD7BIT "us-ascii" if cs_in
	  is CHARSET_STD7BIT.

	* config.h (CHARSET_STDRFC): new #define, charset used for RFC
	  messages without MIME headers.

	* test/cf/fidogate.conf: dito.

	* examples/orodruin/fidogate.conf: added UseXHeaderForTearline.

	* config.h (AI_2): removed, now the default.

	* src/gate/rfc2ftn.c: removed #ifdef AI_2, now the default. The
	  function associated with the alias_extended flag is now part of
	  #ifdef AI_1, which is not enabled per default.

	* src/common/aliases.c: removed #ifdef AI_2, now the default.

	* src/gate/rfc2ftn.c (main): new config option
	  UseXHeaderForTearline, replacing old AI_7 patches.
	  (st_mimeinfo): added type_boundary field.
	  (get_mime): added parsing for boundary=...
	  (get_mime): added NULL pointer check for mime.type.

	* config.h (AI_7): removed, obsoleted by new UseXHeaderForTearline
	  config option.

	* src/gate/rfc2ftn.c (snd_message): MIME header output only for
	  rfc_level > 0.
	  (snd_message): added new paramter node_from to pass node_from
	  from snd_mail().
	  (snd_message): replaced ftn_from from AI_2 patches with
	  node_from, removed some #ifdef's.
	  (print_origin): new paramter node_from.
	  (print_local_msgid): new parameter node_from.
	  (sendmail_t): renamed to snd_to_cc_bcc().
	  (main): use DEFAULT_NEWSSPOOLDIR instead of fixed "/var/spool/news".
	  (print_tear_line): #ifdef PASSTHRU_ECHOMAIL removed, new config
	  flag use_x_for_tearline enables getting tearline string from
	  headers X-FTN-Tearline, X-Mailer, User-Agent, X-Newsreader.

	* src/gate/rfc2ftn.c (snd_message): added output of modified MIME
	  header lines, header_ca_rfc() won't do this anymore.

	* config.h (RFC_LVL_1_HEADERS): removed MIME headers, will be done
	  "manually" in rfc2ftn.

	* src/gate/rfc2ftn.c (snd_message): cs_out_rfc, cs_out_fsc contain
	  RFC 2045, FSC-0054 name of charset, used for Content-Type,
	  ^ACHRS, respectively.
	  (snd_message): change Content-Transfer-Encoding depending on
	  cs_out to "7BIT" or "8BIT".

	* src/charset/charset.c (charset_alias_fsc): new function, searchs
	  FSC-0054 name for charset from alias list.
	  (charset_alias_rfc): new functions, search RFC 2045 name for
	  charset from alias list.

	* src/charset/charset.map: added us-ascii -> * mappings, updated
	  comments. 

	* src/common/mime.c (mime_dequote): translate chars >= 0x80 using
	  charset_map_c().

	* src/gate/rfc2ftn.c (snd_mail): copy list of newsgroups to
	  textlist, allowing strtok() to be used in functions called by
	  snd_mail(). 
	  (get_mime): parse Content-Type header, extract MIME type and
	  charset. 
	  (snd_message): moved MIME debug() output to get_mime().
	  (get_mime): added .type_type and .type_charset to debug() output.
	  (main): call charset_init().
	  (snd_message): use s_copy() for cs_save.
	  (snd_message): convert cs_out to upper case and use for
	  ^ACHRS. Should be fixed to search for an FSC-0054 alias, because
	  it may be configured as e.g. "iso-8859-1" instead of "latin-1".

	* src/common/misc.c (strip_space): function now returns char *
	  pointer to 1st non-space character of string. This change should
	  be compatible with the old void function.

	* src/gate/rfc2ftn.c (st_mimeinfo): added fields type_type and
	  type_charset for components of Content-Type header.

	----------------------------------------------------------------------

1999-05-19  Martin Junius  <mj@fido.de>

	* examples/win32/config.make: was missing.

	* src/common/packet.c (pkt_get_hdr): when reading FSC-0039 zone
	  fields from packet header, don't use zone 0.

1999-05-18  Martin Junius  <mj@fido.de>

	======= Release 4.3.2 ================================================
	------- CVS tag R432a ------------------------------------------------
	------- CVS ci -------------------------------------------------------

	* src/charset/russian.map: removed inline comments, no longer
	  allowed, causing compilation errors.

	* cvsexp: cvs helper script for exporting FIDOGATE release.

	------- CVS tag R432 -------------------------------------------------
	------- CVS ci -------------------------------------------------------

	* fidogate.lsm: updated.

	* config.h (HAS_STRERROR): #define for OS2.

	* examples/orodruin/fidogate.conf: updated.

	* src/common/mime.c (mime_dequote): bug fix for =<LF>.

	------- CVS ci -------------------------------------------------------

	* config.h (AI_9): removed, obsoleted by code changes.

	* src/gate/rfc2ftn.c (main): added DefaultCharset/NetMailCharset
	  options.
	  (snd_message): preparation for charset mapping table, get cs_out
	  from FIDOGATE/area config, set mapping.

	* src/common/mime.c (mime_dequote): function prepared to add
	  charset mapping.

	* src/common/mime.c (mime_dequote): removed AI_9 patches.

	* src/gate/rfc2ftn.c (check_downlinks): correct calculation for #
	  of downlinks, reduce by 1 if gateway is the first entry in LON.
	  (snd_mail): cf_set_curr/zone() directly after area is found.
	  (snd_message): removed AI_9 patches, correct lsize calculations
	  for lines with MIME soft line-breaks =<LF>.

1999-05-16  Martin Junius  <mj@fido.de>

	* doc/fidogate.texi (Config files): updated.

	* src/common/packet.c (pkt_get_hdr): initialize pkt->from/to.zone
	  values with cf_defzone(), avoid 0-Zone with really old tosser
	  programs which produce only 2D packets.

1999-05-15  Martin Junius  <mj@fido.de>

	------- CVS ci -------------------------------------------------------

	* ANNOUNCE (WARNING): updated.

	* doc/fidogate.texi (config.make): updated.
	  (Integration): updated.
	  (Compiling): updated.
	  (Testing): removed old stuff.
	  (Connecting): updated.

	* config.make: removed SHELL = /bin/sh

	------- CVS ci -------------------------------------------------------

	* src/common/dir.c (dir_compare): if size or mtime are the same,
	  compare name, yielding a deterministic order in which files with 
	  the same mtime are processed.

	* src/toss/rununpack.pl (run_prog): dito.
	  (run_arc): dito.

	* src/toss/runtoss.pl (run_prog): $args[0] contains full path
	  name, using system { $fullpath } @args doesn't seem to work with 
	  ActiveState perl on Win32.

	* config.h: #undef HAS_GETTIMEOFDAY for Win32, returns wrong
	  system time (time zone). #undef NFS_SAFE_LOCK_FILES if
	  HAS_HARDLINKS is not defined, e.g. Win32.	  

	* examples/win32/*: updated, added new example files.

	* src/tick/ftntick.c (move): dito.

	* src/toss/ftnroute.c (do_move): if utime() fails (seems to happen 
	  on Win32) make this a warning.

1999-05-13  Martin Junius  <mj@fido.de>

	* doc/fidogate.texi (config.h): updated for 4.3.
	  (Installation): updated.
	  (Introduction): updated.

	* config.h (SECURE): removed, secure is now the one and only default.

	* doc/fidogate.texi (Point): removed node.

1999-05-09  Martin Junius  <mj@fido.de>

	* src/areafix/areafix.c (cmd_unlinked): use same check permissions 
	  code as for command %list, so areas without access right aren't
	  listed for %unlinked.

1999-05-04  Martin Junius  <mj@fido.de>

	* *: added patches for some minor problems when compiling with
	  Cygwin32. 

	* examples/win32/config.make: compile config file for Cygwin32
	  port, everything lives under /fidogate/...

	* src/charset/charsetc.c: added some NULL pointer checks.

1999-04-18  Martin Junius  <mj@fido.de>

	* src/common/config.c (cf_getline): don't allow inline '#'
	  comments, only lines starting with white space and a '#' are
	  treated as comments and skipped.

1999-04-10  Martin Junius  <mj@fido.de>

	* scripts/*/Makefile: make all PROGS depend on config.make and
	  config.pl

	* config.make (DEFAULT_F_IFMAILDIR): set to /usr/lib/ifcico, which 
	  is the new directory where I installed ifcico-3.0.cm.alpha-4.1
	  ( distribution default is /usr/lib/ifmail ).

1999-04-09  Martin Junius  <mj@fido.de>

	* ANNOUNCE: updated.

	* src/common/misc.c (run_system): make cmd[] as large as buffer[], 
	  may contain a long command line, e.g. from ffxqt!

1999-04-03  Martin Junius  <mj@fido.de>

	------- CVS ci -------------------------------------------------------

	* scripts/maintenance/logsendmail.pl: don't output $unaccounted,
 	  caused by from/to entries in different log files due to log file
 	  cycling.

	* test/tc.*/run.verify: diffs seems to be OK, updated all.

	* test/Makefile (all-mk-verify): added target for updating
	  run.verify for all test cases.

	* test/tc.8bit/run: output outpkt/outrfc.

	* src/*/*.c: fixed various small problems resulting from the
	  node_to_asc() replacement.

	* scripts/Makefile: dito.

	* Makefile: dito.

	* src/Makefile (test): targets verify, test are the same as check.

	* src/common/parsenode.c (str_znfp_print): must initialize s[] to
	  empty string first.

	------- CVS ci -------------------------------------------------------

	* version.h (PATCHLEVEL): set to 2 (version 4.3.2).

	* src/common/parsenode.c (znfp): renamed to s_znfp().

	* src/common/node.c (node_to_asc): removed.

	* src/*/*.c: replaced all calls to node_to_asc() with znfp1(),
	  znfp2(), znf1(), znf2().

	* src/common/parsenode.c (str_znfp_print): new function, writes
	  Z:N/F.P to s[len], based on old s_znfp_print().
	  (s_znfp_print): new function now calling str_znfp_print().
	  (znfp1): same as znfp() but returning a static buf[].
	  (znfp2): same as znfp() but returning a static buf[],
	  independent of znfp1() for printf etc.
	  (znf1): new function for output with point0=FALSE, wildcards=FALSE.

1999-03-28  Martin Junius  <mj@fido.de>

	------- CVS ci -------------------------------------------------------

	* src/toss/ftntoss.c (add_via): use DATE_VIA.

	* src/toss/ftnroute.c (add_via): use DATE_VIA.

	* src/gate/rfc2ftn.c (snd_message): use DATE_SPLIT.
	  (print_via): use DATE_VIA.

	* src/gate/ftn2rfc.c (unpack): use DATE_FROM.

	* src/common/outpkt.c (outpkt_netmail): use DATE_VIA.

	* src/common/log.c (log): use DATE_LOG.

	* src/common/bounce.c (bounce_header): use DATE_FROM.

	* config.h (DATE_FROM): new #define for date in From_ lines.
	  (DATE_LOG): new #define for date in log() messages.
	  (DATE_VIA): new #define for date in ^AVia lines.
	  (DATE_SPLIT): new #define for date in ^ASPLIT lines.

	* src/common/tick.c (tick_add_path): use DATE_TICK_PATH.

	* config.h (DATE_TICK_PATH): renamed DATE_FIDO.

	* src/common/packet.c (pkt_put_date): use DATE_FTS_0001 from
	  config.h as format string for date().

1999-03-27  Martin Junius  <mj@fido.de>

	* src/toss/rununpack.pl (arc_type): return "RAR" if it's a RAR
	  archive. 

1999-03-21  Martin Junius  <mj@fido.de>

	* test/tc.y2k/run: new test case for Y2k and date/time functions.

	* src/common/parsedate.y (main): test all date() % formats.

1999-03-20  Martin Junius  <mj@fido.de>

	* src/common/Makefile (testdate): new test program.

	* src/common/parsedate.y (main): new test main().

	======= Release 4.3.1 ================================================
	------- CVS tag R431 -------------------------------------------------
	------- CVS ci -------------------------------------------------------

	* doc/dirs.html: updated.

	* README: updated.

	* ANNOUNCE: 4.3aX changes moved to README.

	* examples/morannon/fidogate.conf: Maus*, ftp removed. Old config
	  files removed.

	* fidogate.lsm: updated.

1999-03-19  Martin Junius  <mj@fido.de>

	* src/gate/ftn2rfc.c (unpack): xfree(cs_save) must be called after 
	  creating the MIME headers. Thanx to
	  <root@neffets.isdn.cs.tu-berlin.de> for reporting this bug.

	------- CVS ci -------------------------------------------------------

	* ChangeLog*: ChangeLog.O moved to ChangeLog.OO, ChangeLog.O
	  contains now old ChangeLog entries up to version 4.3a5,
	  ChangeLog entries for version 4.3.0 and later.

	* test/cf/fidogate.conf: dito.

	* examples/orodruin/fidogate.conf: remove Maus*, ftp config.

	* src/gate/rfc2ftn.c (rfc_parse): removed maus.de code.
	  (main): removed MausGate, MausDomain config options.
	  (addr_set_mausdomain): removed.
	  (addr_set_mausgate): removed.

	* src/common/rfcaddr.c (main): call to maus_init() removed.

	* test/tc.packprog/packing: use new fidogate.conf.

	* test/tc.8bit/config*: based on new fidogate.conf.

	------- CVS ci -------------------------------------------------------

	* test/cf/common;ffx;gate;toss.conf: removed.

	* ANNOUNCE: updated.

	* test/: make verify now yields OK for all test cases.

	* test/tc.tosskill/config*: dito.

	* test/tc.tosskill/run: dito.

	* test/tc.toss6/run: dito.

	* test/tc.toss5/run: dito.

	* test/tc.toss4/run: dito.

	* test/tc.toss3/run: dito.

1999-03-17  Martin Junius  <mj@fido.de>

	* test/tc.toss2/run: dito.

	* test/tc.toss1/config*: dito.

	* test/tc.toss1/run: dito.

	* test/tc.tick/run: new fidogate.conf.

	* test/cf/fidogate.conf: commented KillOld.

	* test/tc.rununpack/run: dito.

	* test/tc.route/run: dito.

	* test/tc.route/config: new fidogate.conf.

	* src/common/config.c (cf_check_gate): #if 0'ed "no Uplink or
	  GateAddress" check, cf_i_am_a_gateway_prog() will automatically
	  copy Address to Uplink if no Uplink is specified.

	* test/tc.point2/fidogate.conf: modified test fidogate.conf for
	  point2 test case.

1999-03-16  Martin Junius  <mj@fido.de>

	* test/tc.passthru/config: dito.

	* test/tc.packprog/run: dito.

	* test/tc.outpkt/run: dito.

	* test/tc.nomsgid/run: dito.

	* test/tc.ml/run: new fidogate.conf

	* test/cf/fidogate.conf: commented NoFromLine, uncommented
	  ReplyAddrIfmailTX.

	* test/tc.gateway/run: dito.

	* test/tc.gatenode/run: dito, removed config.*.

1999-03-14  Martin Junius  <mj@fido.de>

	------- CVS ci -------------------------------------------------------

	* test/tc.gate11/config: dito.

	* test/tc.gate11/run: dito.

	* test/tc.gate10/run: dito.

	* test/tc.gate9/config.gate: dito.

	* test/tc.gate8/run: dito.

	* test/tc.gate7/run: dito.

	* test/tc.gate7/config: dito.

	* test/tc.gate6/config*: dito.

	* test/tc.gate6/run: dito.

	* test/tc.gate4/check.conf: dito.

	* test/tc.gate4/config.*: dito.

	* test/tc.gate4/run: new fidogate.conf

	* src/gate/rfc2ftn.c (snd_message): s_freeall() removed, must not
	  be called here.

	* test/tc.gate1/config*: dito.

	* test/tc.gate1/run: dito.

	* test/tc.flo/config.dos: dito.

	* test/tc.ffx/run: dito.

	* test/tc.ffx/ffxmail: dito.

	* test/tc.bounce2/config: dito.

	* test/tc.bounce/run: new fidogate.conf.

	* test/tc.boss/run: new fidogate.conf, extra config.* removed.

	* src/common/config.c (cf_set_addr): set scf_ia=1, scf_ig=0.
	  (cf_set_uplink): set scf_ir=1.
	  (cf_set_addr): also set scf_ir=0.

	* test/tc.aliases/run: dito.

	* test/tc.af3/run: dito.

	* test/tc.af2/run: dito.

	* test/tc.af/config: new fidogate.conf

1999-03-07  Martin Junius  <mj@fido.de>

	------- CVS ci -------------------------------------------------------

	* src/toss/ftntoss.c: dito.

	* src/toss/ftnroute.c (main): dito.

	* src/toss/ftn2ftn.c (do_message): dito.

	* src/ffx/ffx.c (ffx): dito.

	* src/common/rfcaddr.c (rfcaddr_from_ftn): dito.
	  (rfcaddr_from_rfc): dito.

	* src/common/packet.c (pkt_create): dito.
	  (pkt_open_node): dito.

	* src/common/misc.c (strncpy0): removed, obsoleted by str_copy().
	  (strncat0): removed, obsoleted by str_append().

	* src/common/message.c (pkt_get_body): dito.
	  (msg_format_buffer): dito.

	* src/common/binkley.c (bink_bsy_name): dito.
	  (bink_find_flo): dito.
	  (bink_find_out): dito.

	* src/common/address.c (try_pfnz): dito.
	  (inet_to_ftn): dito.

	* src/areafix/ftnafpkt.c (rename_bad): use BUF_COPY() / BUF_APPEND().

	* src/util/ftnflo.c (do_flo): dito.

	* src/toss/ftntoss.c (do_echomail): dito.

	* src/toss/ftnpack.c (arcmail_name): dito.
	  (packing_pkt_name): dito.
	  (do_arcmail): dito.
	  (do_prog): dito.

	* src/gate/rfc2ftn.c (rfc_parse): dito.
	  (snd_message): dito.

	* src/ffx/ffxqt.c (exec_ffx): dito.

	* src/ffx/ffx.c (ffx): dito.

	* src/common/tick.c (tick_send): use str_printf().

	* src/common/textlist.c (tl_appendf): added check for buf[] overflow.

	* src/common/parsenode.c (znfp_put_number): dito.

	* src/common/packet.c (pkt_newname): dito.

	* src/common/outpkt.c (outpkt_outputname): dito.

	* src/common/node.c (node_to_asc_diff): dito.
	  (node_to_pfnz): dito.

	* src/common/mail.c (mail_open): dito.

	* src/common/lock.c (lock_lockfile_nfs): dito.

	* src/common/flo.c (main): dito.

	* src/common/binkley.c (bink_out_name): dito.
	  (bink_mkdir): dito.

	* src/charset/charset.c (charset_qpen): use str_printf().

	* src/areafix/areafix.c (areafix_tlprintf): check vsprintf()
	  returned length, fatal error if buf[] overflows.

	------- CVS ci -------------------------------------------------------

	* src/include/shuffle.h: removed, obsoleted by new TmpS temporary
	  strings used throughout FIDOGATE.

	* src/common/parsenode.c (znfp_print): renamed to s_znfp_print().
	  (s_znfp_print): rewritten to use TmpS and str_copy(), str_append().

	* src/common/rfcheader.c (header_getcomplete): renamed to
	  s_header_getcomplete().
	  (s_header_getcomplete): completely rewritten to use TmpS and
	  str_copy(), str_append().

	* src/common/rfcaddr.c (rfcaddr_to_asc): renamed to s_rfcaddr_to_asc().
	  (s_rfcaddr_to_asc): got rid of SHUFFLEBUFFER, use s_printf().

	* src/common/version.c (version_global): removed #ifdef's, simply
 	  return "MAJOR.MINOR.PATCHLEVEL".
	  (version_major, minor): simply return VERSION_MAJOR, _MINOR.

	* version.h: completely changed, now 4 #define's:
	  VERSION_MAJOR		major version number
	  VERSION_MINOR		minor version number
	  PATCHLEVEL		patchlevel
	  STATE			development ./. stable
	  Current version: 4.3.1 (development)

	* src/common/version.c (version_local): changed to use BUF_COPY().

	* version.h (PATCHLEVEL): changed to 1, version 4.3.1
	  (ALPHA, BETA): removed.
	  (STATE): change to "development".

	* src/gate/rfc2ftn.c (snd_mail): more TMPS_RETURN(), fixed missing 
	  if(status) in newsgroups for loop.

	* src/gate/ftn2rfc.c (unpack): changed log() message, 

1999-03-06  Martin Junius  <mj@fido.de>

	------- CVS ci -------------------------------------------------------

	* src/util/pktdebug.c (main): call tmps_freeall().

	* src/util/ftnoutpkt.c (do_addr): use TMPS_RETURN().

	* src/toss/ftntoss.c (unpack_file): use TMPS_RETURN().
	  (unpack): dito.

	* src/toss/ftnroute.c (do_file): use TMPS_RETURN().
	  (do_packet): dito.

	* src/toss/ftnpack.c (main): calls to tmps_freeall().
	  (do_packing): use TMPS_RETURN().
	  (do_noarc): dito.
	  (do_file): dito.

	* src/toss/ftn2ftn.c (unpack): use TMPS_RETURN().
	  (main): calls to tmps_freeall().

	* src/tick/ftntick.c (do_tic): added call to tmps_freeall().
	  (process_tic): added call to tmps_freeall in for loop.

	* src/tick/ftnhatch.c (main): added call to tmps_freeall().

	------- CVS ci -------------------------------------------------------

	* src/gate/ftn2rfc.c (main): added call to tmps_freeall().
	  (unpack): use tmps_freeall(), TMPS_RETURN().

	* src/gate/rfc2ftn.c (main): added call to tmps_freeall().
	  (snd_mail): use TMPS_RETURN().

	* src/gate/ftnin.c (do_packets): dito.

	* src/ffx/ffxqt.c (do_ffx): added call to tmps_freeall() in for loop.

	* src/ffx/ffx.c (main): added call to tmps_freeall().

	* src/common/tmps.c (testf): added test function for TMPS_RETURN() 
	  macro.

1999-03-03  Martin Junius  <mj@fido.de>

	* src/common/address.c (str_printf): moved to misc.c.

	* src/areafix/pkttmpl.c (do_file): use TMPS_RETURN().

	* src/areafix/ftnafpkt.c (do_packet): use TMPS_RETURN().

	* src/areafix/pkttmpl.c (do_packet): use TMPS_RETURN().

	* src/areafix/ftnafutil.c (do_areasbbs): call tmps_freeall().

	* src/areafix/ftnafpkt.c (do_file): use TMPS_RETURN().

	* src/areafix/ftnaf.c (do_mail): use TMPS_RETURN().

	* src/include/prototypes.h (TMPS_RETURN): new macro, calls
	  tmps_freeall() and returns from function.

1999-02-28  Martin Junius  <mj@fido.de>

	* scripts/outbound/out-rm*.sh: updated.

	* scripts/outbound/out-manip.pl: removed RCS log, use <BTBASEDIR>.

	* scripts/run/runpoll-binkd.sh: add out-manip poll $BOSSNODE to
	  force binkd poll.

	* scripts/run/runpoll-orodruin.sh: must use full path for xterm,
	  setuid wrapper resets PATH.

	* scripts/run/runpoll*.sh: use $0 for exec xterm.

1999-02-21  Martin Junius  <mj@fido.de>

	* scripts/misc/areasbbssync.pl: changed -l output to be suitable
	  for text listing.

1999-02-07  Martin Junius  <mj@fido.de>

	------- CVS ci -------------------------------------------------------

	* scripts/maintenance/logsendmail.pl: new version with many bug
	  fixes, new stats, and improved output.

1999-02-04  Martin Junius  <mj@fido.de>

	* scripts/maintenance/logsendmail.pl: don't depend on $HOSTNAME
	  for parsing syslog line. Major changes, Perl5'ified. Added
	  counter for bounced messages, bounced messages are no longer
	  included in traffic matrix.

1999-01-30  Martin Junius  <mj@fido.de>

	* scripts/maintenance/logdaily.sh: run logstat for log files
	  log-in, log-mail, log-news.

1999-01-16  Martin Junius  <mj@fido.de>

	* examples/morannon/fidogate.conf: new example single
	  configuration with setting for morannon.fido.de (gateway and
	  large hub).

	* scripts/run/runpoll-binkd.sh: modified version of
	  runpoll-orodruin.sh using binkd for polling boss node.

1999-01-10  Martin Junius  <mj@fido.de>

	======= Release 4.3.0 ================================================
	------- CVS tag R430 -------------------------------------------------
	------- CVS ci -------------------------------------------------------

	* fidogate.lsm: updated.

	* ANNOUNCE: updated.

	* README: updated.

	* src/common/log.c (log): save errno before trying to open log
	  file and restore afterwards.

	------- CVS ci -------------------------------------------------------

	* config.make (DEFAULT_F_CONFIG_xxx): switch to new single config
	  file "fidogate.conf".

1999-01-09  Martin Junius  <mj@fido.de>

	------- CVS ci -------------------------------------------------------

	* test/tc.gate5/run: same as tc.gate3

	* test/tc.gate3/run: use new fidogate.conf, added pktdebug output
	  of all created packets.

	* test/tc.gate2/run: use new fidogate.conf, added output of all
	  created RFC messages.

	* test/tc.newcf/run: new test case for checking configuration with 
	  single config file fidogate.conf.

	* examples/orodruin/fidogate.conf: example of new single
	  configuration file.

	* src/toss/ftntoss.c (main): config option "EchoMail4D" renamed to 
	  "TossEchoMail4D" to avoid conflicts with gateway "EchoMail4D"
	  configuration. 

	* config.make (DEFAULT_F_CONFIG_xxx): added new macro defs with
	  single config file fidogate.conf, commented for the time being.

1999-01-02  Martin Junius  <mj@fido.de>

	------- CVS ci -------------------------------------------------------

	* src/common/node.c (node_to_pfnz): modified to use static buf[]
	  for returning string.
	  (node_to_asc_diff): dito.

	* src/gate/rfc2ftn.c (snd_message): use new s_msgid_rfc_to_fido(), 
	  call s_freeall() at end of function.

	* src/gate/ftn2rfc.c (unpack): use new s_msgid_xxx() functions.

	* src/common/msgid.c (msgid_rfc_to_origid): removed, no longer needed.
	  (s_msgid_fido_to_rfc): converted shuffle.h stuff to TmpS.
	  (s_msgid_default): renamed to s_, converted shuffle.h stuff to TmpS.
	  (s_msgid_convert_origid): dito.
	  (s_msgid_rfc_to_fido): dito.
	  (msgid_domain): improved to only skip 1st char of domain name if 
	  it really is a ".".

	* src/gate/rfc2ftn.c (snd_message): removed #ifdef MSGID_ORIGID code.

	* config.h (MSGID_ORIGID): #define removed.

	* src/common/msgid.c (s_msgid_fido_to_rfc): renamed to s_, now
	  returns TmpS.

	* src/gate/ftn2rfc.c (unpack): use new s_ftn_to_inet().

	* src/common/rfcaddr.c (rfcaddr_from_ftn): use new str_ftn_to_inet().

	* src/common/address.c (s_ftn_to_inet): TmpS wrapper for
	  str_ftn_to_inet(). 
	  (str_printf): new replacement for sprintf(), uses vsnprintf() if 
	  available or terminates with fatal() error if buffer overflows.
	  (str_ftn_to_inet): renamed version of old ftn_to_inet()
	  function writing to str buffer.
	  (verify_host_flag): removed SHUFFLEBUFFERS.

	* src/common/config.c (cf_i_am_a_gateway_prog): if neither
	  GateAddress nor Uplink is used, copy Address to Uplink (same
	  address for gateway and tosser).

	* *: Copyright comments extended to year 1999.

	* version.h: commented ALPHA, making this the new version
	  4.3.0. From now on, 4.3.x will be the development versions, 4.4.x
	  the future new stable versions.

	* src/areafix/areafix.c (cmd_help): added log() if helpfile can't
	  be opened of AreaFixHelp is not defined.

1998-12-13  Martin Junius  <mj@fido.de>

	* sendmail/cf/morannon-check.mc: added confCOPY_ERRORS_TO.

1998-11-28  Martin Junius  <mj@fido.de>

	* scripts/run/runpoll.sh: modified (old) runpoll for generic point 
	  excluding ffx programs.

	* scripts/run/runpoll-orodruin.sh: new (old) runpoll including ffx 
	  programs.

1998-11-23  Martin Junius  <mj@fido.de>

	* src/toss/rununpack.pl (run_arc): removed extra "su" from regex.

1998-11-15  Martin Junius  <mj@fido.de>

	* examples/morannon/*.conf: updated.

	* scripts/www/gate.cgi.pl (my_ps_news): some cosmetic changes.

	------- CVS ci -------------------------------------------------------

	* scripts/www/gate.cgi.pl: new CGI script displaying gateway
	  status, who, last, processes, news and FIDOATE directories.

	* scripts/www/: new directory for CGI scripts to be used with FIDOGATE.

	* rules.make (%.cgi): added rule for .cgi.pl -> .cgi

	* subst.pl: Perl5'ified, added -o OPTS options to #!PERL line.

	* config.make (HTMLLOGDIR): directory for installing CGI scripts.

1998-11-14  Martin Junius  <mj@fido.de>

	* scripts/misc/afmail.pl, areamgr.pl: removed.

1998-11-08  Martin Junius  <mj@fido.de>

	------- CVS ci -------------------------------------------------------

	* scripts/maintenance/rc.fidogate.sh: adapted to new FIDOGATE dir
	  hierarchy.

	* scripts/maintenance/newsyslog.sh: removed (dito).

	* scripts/maintenance/logmaint.sh: removed (replaced with
	  logrotate configuration).

	* scripts/maintenance/logdaily.sh: added logstat, logreport.

	* src/toss/runtoss.pl: use grade "o" for tossing "outpkt".

	* scripts/maintenance/fidogate.logrotate: example logrotate
	  configuration for new FIDOGATE log files (run* scripts).

	* src/gate/rungate.sh: don't use non-standard log file "log-gate".

	* src/ffx/runffx.sh: add "orodruin" argument to send-ffx, use %B
	  for Binkley base dir.

	* src/gate/send-fidogate.sh: new script interface to INN.

	* src/ffx/send-ffx.sh: new script interface to INN, using new
	  ffxnews. 

	* src/ffx/ffxnews.sh: new script replacing old viaffx script.

1998-11-04  Martin Junius  <mj@fido.de>

	* src/ffx/runffx.sh: new cron script for running ffx sub-system.

	* src/toss/runin.sh: added ftntick.

	* src/gate/rungate.sh: new cron script for running gateway progs.
